<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta charset="UTF-8">
		<title>Test Page for sap.m.Select</title>
		<script id="sap-ui-bootstrap"
				data-sap-ui-theme="sap_bluecrystal"
				data-sap-ui-noConflict="true"
				data-sap-ui-libs="sap.m"
				src="../../../../resources/sap-ui-core.js">
		</script>
		<link rel="stylesheet" href="../../../../resources/sap/ui/thirdparty/qunit.css" type="text/css" media="screen" />
		<script src="../../../../resources/sap/ui/thirdparty/qunit.js"></script>
		<script type="text/javascript" src="../../../../resources/sap/ui/qunit/qunit-junit.js"></script>
		<script src="../../../../resources/sap/ui/qunit/QUnitUtils.js"></script>
		<script src="../../../../resources/sap/ui/thirdparty/sinon.js"></script>
		<script src="../../../../resources/sap/ui/thirdparty/sinon-qunit.js"></script>
		<script>
		QUnit.config.autostart = false;
		sap.ui.test.qunit.delayTestStart();

		// helper functions
		var fnGetDomRefs = function(sId) {

			var oSelect = sap.ui.getCore().byId(sId),
				$Select = oSelect.$(),
				$Label = $Select.children("." + sap.m.SelectRenderer.CSS_CLASS + "Label"),
				$Arrow = $Select.children("." + sap.m.SelectRenderer.CSS_CLASS + "Arrow"),
				$Icon = $Select.children("." + sap.m.SelectRenderer.CSS_CLASS + "Icon"),
				$HtmlSelect = $Select.children("select"),
				$Options = $HtmlSelect.children("option");

			return {
				$Select: $Select,
				$Label: $Label,
				$Arrow: $Arrow,
				$Icon: $Icon,
				$HtmlSelect: $HtmlSelect,
				$Options: $Options
			}
		};

		var fnTestControlProperty = function(mOptions) {
			var sProperty = mOptions.property.charAt(0).toUpperCase() + mOptions.property.slice(1);

			test("get" + sProperty + "()", function() {
				strictEqual(mOptions.control["get" + sProperty](), mOptions.output, mOptions.description);
			});
		};

		/* =========================================================== */
		/* API module                                                  */
		/* =========================================================== */

		module("API");

		/* ------------------------------ */
		/* tests for default values       */
		/* ------------------------------ */

		test("default values", function() {

			// system under test
			var oSelect = new sap.m.Select({
				items: [
					new sap.ui.core.Item({
						id: "item-id",
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1",
						enabled: false
					}),

					new sap.ui.core.Item({
						key: "2",
						text: "item 2"
					})
				]
			});

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();

			// assertions
			strictEqual(oSelect.getName(), "", 'Default name is ""');
			strictEqual(oSelect.getVisible(), true, "By default the Select control is visible");
			strictEqual(oSelect.getEnabled(), true, "By default the Select control is enabled");
			strictEqual(oSelect.getWidth(), "auto", 'By default the "width" of the Select control is "auto"');
			strictEqual(oSelect.getMaxWidth(), "100%", 'By default the "max-width" of the Select control is "100%"');
			ok(oSelect.getSelectedItem() === oSelect.getFirstItem(), "By default the selected items of the Select control is the first item");
			strictEqual(oSelect.getSelectedItemId(), "item-id", "By default the selected items id of the Select control is the id of the first item");
			strictEqual(oSelect.getSelectedKey(), "0", "By default the selected key of the Select control is the key property of the first item");

			// cleanup
			oSelect.destroy();
		});

		/* ------------------------------ */
		/* getName()                      */
		/* ------------------------------ */

		fnTestControlProperty({
			control: new sap.m.Select({
				visible: false
			}),
			property: "name",
			output: "",
			description: 'The name is ""'
		});

		fnTestControlProperty({
			control: new sap.m.Select({
				name: "my-select",
				items: [
					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					})
				]
			}),
			property: "name",
			output: "my-select",
			description: 'The name is ""'
		});

		/* ------------------------------ */
		/* getVisible()                   */
		/* ------------------------------ */

		fnTestControlProperty({
			control: new sap.m.Select({
				items: [
					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					})
				],
				visible: false
			}),
			property: "visible",
			output: false,
			description: "Is not visible"
		});

		fnTestControlProperty({
			control: new sap.m.Select(),
			property: "visible",
			output: true,
			description: "Is visible"
		});

		/* ------------------------------ */
		/* getEnabled()                   */
		/* ------------------------------ */

		fnTestControlProperty({
			control: new sap.m.Select(),
			property: "enabled",
			output: true,
			description: "Is enable"
		});

		fnTestControlProperty({
			control: new sap.m.Select({
				enabled: false
			}),
			property: "enabled",
			output: false,
			description: "Is disabled"
		});

		/* ------------------------------ */
		/* getWidth()                     */
		/* ------------------------------ */

		fnTestControlProperty({
			control: new sap.m.Select({
				width: "50%"
			}),
			property: "width",
			output: "50%",
			description: 'The "width" is "50%"'
		});

		fnTestControlProperty({
			control: new sap.m.Select({
				width: "13rem"
			}),
			property: "width",
			output: "13rem",
			description: 'The "width" is "13rem"'
		});

		fnTestControlProperty({
			control: new sap.m.Select({
				width: "200px"
			}),
			property: "width",
			output: "200px",
			description: 'The "width" is "200px"'
		});

		fnTestControlProperty({
			control: new sap.m.Select({
				width: "4em"
			}),
			property: "width",
			output: "4em",
			description: 'The "width" is "4em"'
		});

		fnTestControlProperty({
			control: new sap.m.Select(),
			property: "width",
			output: "auto",
			description: 'The "width" is "auto"'
		});

		fnTestControlProperty({
			control: new sap.m.Select({
				width: "2in"
			}),
			property: "width",
			output: "2in",
			description: 'The "width" is "2in"'
		});

		fnTestControlProperty({
			control: new sap.m.Select({
				width: "3cm"
			}),
			property: "width",
			output: "3cm",
			description: 'The "width" is "3cm"'
		});

		fnTestControlProperty({
			control: new sap.m.Select({
				width: "125pt"
			}),
			property: "width",
			output: "125pt",
			description: 'The "width" is "125pt"'
		});

		/* ------------------------------ */
		/* getMaxWidth()                  */
		/* ------------------------------ */

		fnTestControlProperty({
			control: new sap.m.Select({
				maxWidth: "50%"
			}),
			property: "maxWidth",
			output: "50%",
			description: 'The "maxWidth" is "50%"'
		});

		fnTestControlProperty({
			control: new sap.m.Select({
				maxWidth: "13rem"
			}),
			property: "maxWidth",
			output: "13rem",
			description: 'The "maxWidth" is "13rem"'
		});

		fnTestControlProperty({
			control: new sap.m.Select({
				maxWidth: "200px"
			}),
			property: "maxWidth",
			output: "200px",
			description: 'The "maxWidth" is "200px"'
		});

		fnTestControlProperty({
			control: new sap.m.Select({
				maxWidth: "4em"
			}),
			property: "maxWidth",
			output: "4em",
			description: 'The "maxWidth" is "4em"'
		});

		fnTestControlProperty({
			control: new sap.m.Select(),
			property: "maxWidth",
			output: "100%",
			description: 'The "maxWidth" is "100%"'
		});

		fnTestControlProperty({
			control: new sap.m.Select({
				maxWidth: "2in"
			}),
			property: "maxWidth",
			output: "2in",
			description: 'The "maxWidth" is "2in"'
		});

		fnTestControlProperty({
			control: new sap.m.Select({
				maxWidth: "3cm"
			}),
			property: "maxWidth",
			output: "3cm",
			description: 'The "maxWidth" is "3cm"'
		});

		fnTestControlProperty({
			control: new sap.m.Select({
				maxWidth: "125pt"
			}),
			property: "maxWidth",
			output: "125pt",
			description: 'The "maxWidth" is "125pt"'
		});

		/* ------------------------------ */
		/* getSelectedItem()              */
		/* ------------------------------ */

		test("getSelectedItem()", function() {

			// system under test
			var oExpectedItem;
			var oSelect = new sap.m.Select({
				items: [
					oExpectedItem = new sap.ui.core.Item({
						id: "item-id1",
						key: "0",
						text: "item 0"
					})
				],

				selectedItem: oExpectedItem
			});

			// assertions
			ok(oSelect.getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getSelectedItemId(), "item-id1");
			strictEqual(oSelect.getSelectedKey(), "0");
			ok(oSelect.getList().getSelectedItem() === oExpectedItem.data(sap.m.SelectRenderer.CSS_CLASS + "ListItem"));
			// strictEqual(oSelect.getValue(), "item 0");	// not implemented

			// cleanup
			oSelect.destroy();
		});

		test("getSelectedItem()", function() {

			// system under test
			var oExpectedItem;
			var oSelect = new sap.m.Select({
				items: [
					new sap.ui.core.Item({
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					}),

					oExpectedItem = new sap.ui.core.Item({
						id: "item-id1",
						key: "2",
						text: "item 2"
					}),

					new sap.ui.core.Item({
						key: "3",
						text: "item 3"
					})
				],

				selectedItem: "item-id1"
			});

			// assertions
			ok(oSelect.getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getSelectedItemId(), "item-id1");
			strictEqual(oSelect.getSelectedKey(), "2");
			ok(oSelect.getList().getSelectedItem() === oExpectedItem.data(sap.m.SelectRenderer.CSS_CLASS + "ListItem"));
			// strictEqual(oSelect.getValue(), "item 2");	// not implemented

			// cleanup
			oSelect.destroy();
		});

		test("getSelectedItem()", function() {

			// system under test
			var oExpectedItem;
			var oSelect = new sap.m.Select({

				selectedItem: "item-id",

				items: [
					new sap.ui.core.Item({
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					}),

					oExpectedItem = new sap.ui.core.Item({
						id: "item-id",
						key: "2",
						text: "item 2"
					}),

					new sap.ui.core.Item({
						key: "3",
						text: "item 3"
					})
				]
			});

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();

			// assertions
			ok(oSelect.getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getSelectedItemId(), "item-id");
			strictEqual(oSelect.getSelectedKey(), "2");
			ok(oSelect.getList().getSelectedItem() === oExpectedItem.data(sap.m.SelectRenderer.CSS_CLASS + "ListItem"));
			// strictEqual(oSelect.getValue(), "item 2");	// not implemented

			// cleanup
			oSelect.destroy();
		});

		test("getSelectedItem()", function() {

			// system under test
			var oExpectedItem;
			var oSelect = new sap.m.Select({
				selectedKey: "1",

				items: [
					new sap.ui.core.Item({
						key: "0",
						text: "item 0"
					}),

					oExpectedItem = new sap.ui.core.Item({
						id: "item-id",
						key: "1",
						text: "item 1"
					}),

					new sap.ui.core.Item({
						key: "2",
						text: "item 2"
					})
				]
			});

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();

			// assertions
			ok(oSelect.getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getSelectedItemId(), "item-id");
			strictEqual(oSelect.getSelectedKey(), "1");
			ok(oSelect.getList().getSelectedItem() === oExpectedItem.data(sap.m.SelectRenderer.CSS_CLASS + "ListItem"));
			// strictEqual(oSelect.getValue(), "item 1");	// not implemented

			// cleanup
			oSelect.destroy();
		});

		test("getSelectedItem()", function() {

			// system under test
			var oSelect = new sap.m.Select({
				items: []
			});

			// assertions
			ok(oSelect.getSelectedItem() === null);
			strictEqual(oSelect.getSelectedItemId(), "");
			strictEqual(oSelect.getSelectedKey(), "");
			ok(oSelect.getList().getSelectedItem() === null);
			// strictEqual(oSelect.getValue(), "");	// not implemented

			// cleanup
			oSelect.destroy();
		});

		test("getSelectedItem()", function() {

			// system under test
			var oExpectedItem;
			var oSelect = new sap.m.Select({
				items: [
					oExpectedItem = new sap.ui.core.Item({
						id: "item-id",
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					}),

					new sap.ui.core.Item({
						key: "2",
						text: "item 2"
					})
				],

				selectedItem: null
			});

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();

			// assertions
			ok(oSelect.getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getSelectedItemId(), "item-id");
			strictEqual(oSelect.getSelectedKey(), "0");
			ok(oSelect.getList().getSelectedItem() === oExpectedItem.data(sap.m.SelectRenderer.CSS_CLASS + "ListItem"));
			// strictEqual(oSelect.getValue(), "item 0");	// not implemented

			// cleanup
			oSelect.destroy();
		});

		test("getSelectedItem()", function() {

			// system under test
			var oExpectedItem;
			var oSelect = new sap.m.Select({
				items: [
					oExpectedItem = new sap.ui.core.Item({
						id: "item-id",
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					}),

					new sap.ui.core.Item({
						key: "2",
						text: "item 2"
					})
				],

				selectedKey: ""
			});

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();

			// assertions
			ok(oSelect.getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getSelectedItemId(), "item-id");
			strictEqual(oSelect.getSelectedKey(), "0");
			ok(oSelect.getList().getSelectedItem() === oExpectedItem.data(sap.m.SelectRenderer.CSS_CLASS + "ListItem"));
			// strictEqual(oSelect.getValue(), "item 0");	// not implemented

			// cleanup
			oSelect.destroy();
		});

		/* ------------------------------ */
		/* getSelectedItemId()            */
		/* ------------------------------ */

		test("getSelectedItem()", function() {

			// system under test
			var oExpectedItem;
			var oSelect = new sap.m.Select({
				items: [
					oExpectedItem = new sap.ui.core.Item({
						id: "item-id",
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					}),

					new sap.ui.core.Item({
						key: "2",
						text: "item 2"
					})
				],

				selectedItemId: undefined
			});

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();

			// assertions
			ok(oSelect.getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getSelectedItemId(), "item-id");
			strictEqual(oSelect.getSelectedKey(), "0");
			ok(oSelect.getList().getSelectedItem() === oExpectedItem.data(sap.m.SelectRenderer.CSS_CLASS + "ListItem"));
			// strictEqual(oSelect.getValue(), "item 0");	// not implemented

			// cleanup
			oSelect.destroy();
		});

		test("getSelectedItemId()", function() {

			// system under test
			var oExpectedItem;
			var oSelect = new sap.m.Select({
				items: [
					oExpectedItem = new sap.ui.core.Item({
						id: "item-id",
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					}),

					new sap.ui.core.Item({
						key: "2",
						text: "item 2"
					})
				],

				selectedItemId: ""
			});

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();

			// assertions
			ok(oSelect.getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getSelectedItemId(), "item-id");
			strictEqual(oSelect.getSelectedKey(), "0");
			ok(oSelect.getList().getSelectedItem() === oExpectedItem.data(sap.m.SelectRenderer.CSS_CLASS + "ListItem"));
			// strictEqual(oSelect.getValue(), "item 0");	// not implemented

			// cleanup
			oSelect.destroy();
		});

		/* ------------------------------ */
		/* getSelectedKey()               */
		/* ------------------------------ */

		test("getSelectedKey()", function() {

			// system under test
			var oExpectedItem;
			var oSelect = new sap.m.Select({
				items: [
					oExpectedItem = new sap.ui.core.Item({
						id: "item-id",
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					}),

					new sap.ui.core.Item({
						key: "2",
						text: "item 2"
					})
				],

				selectedKey: undefined
			});

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();

			// assertions
			ok(oSelect.getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getSelectedItemId(), "item-id");
			strictEqual(oSelect.getSelectedKey(), "0");
			ok(oSelect.getList().getSelectedItem() === oExpectedItem.data(sap.m.SelectRenderer.CSS_CLASS + "ListItem"));
			// strictEqual(oSelect.getValue(), "item 0");	// not implemented

			// cleanup
			oSelect.destroy();
		});

		test("getSelectedKey()", function() {

			// system under test
			var oExpectedItem;
			var oSelect = new sap.m.Select({
				items: [
					oExpectedItem = new sap.ui.core.Item({
						id: "item-id",
						key: "0",
						text: "item 0"
					})
				]
			});

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();

			// assertions
			ok(oSelect.getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getSelectedItemId(), "item-id");
			strictEqual(oSelect.getSelectedKey(), "0");
			ok(oSelect.getList().getSelectedItem() === oExpectedItem.data(sap.m.SelectRenderer.CSS_CLASS + "ListItem"));
			// strictEqual(oSelect.getValue(), "item 0");	// not implemented

			// cleanup
			oSelect.destroy();
		});

		test("getSelectedKey()", function() {

			// system under test
			var oExpectedItem;
			var oSelect = new sap.m.Select({
				items: [
					new sap.ui.core.Item({
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					}),

					oExpectedItem = new sap.ui.core.Item({
						id: "item-id",
						key: "2",
						text: "item 2"
					}),

					new sap.ui.core.Item({
						key: "3",
						text: "item 3"
					})
				],

				selectedItem: "item-id"
			});

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();

			// assertions
			ok(oSelect.getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getSelectedItemId(), "item-id");
			strictEqual(oSelect.getSelectedKey(), "2");
			ok(oSelect.getList().getSelectedItem() === oExpectedItem.data(sap.m.SelectRenderer.CSS_CLASS + "ListItem"));
			// strictEqual(oSelect.getValue(), "item 2");	// not implemented

			// cleanup
			oSelect.destroy();
		});

		test("getSelectedKey()", function() {

			// system under test
			var oExpectedItem;
			var oSelect = new sap.m.Select({
				selectedItem: "item-id",

				items: [
					new sap.ui.core.Item({
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					}),

					new sap.ui.core.Item({
						key: "2",
						text: "item 2"
					}),

					oExpectedItem = new sap.ui.core.Item({
						id: "item-id",
						key: "3",
						text: "item 3"
					})
				]
			});

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();

			// assertions
			ok(oSelect.getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getSelectedItemId(), "item-id");
			strictEqual(oSelect.getSelectedKey(), "3");
			ok(oSelect.getList().getSelectedItem() === oExpectedItem.data(sap.m.SelectRenderer.CSS_CLASS + "ListItem"));
			// strictEqual(oSelect.getValue(), "item 3");	// not implemented

			// cleanup
			oSelect.destroy();
		});

		test("getSelectedKey()", function() {

			// system under test
			var oExpectedItem;
			var oSelect = new sap.m.Select({
				selectedKey: "1",

				items: [
					new sap.ui.core.Item({
						key: "0",
						text: "item 0"
					}),

					oExpectedItem = new sap.ui.core.Item({
						id: "item-id",
						key: "1",
						text: "item 1"
					}),

					new sap.ui.core.Item({
						key: "2",
						text: "item 2"
					})
				]
			});

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();

			// assertions
			ok(oSelect.getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getSelectedItemId(), "item-id");
			strictEqual(oSelect.getSelectedKey(), "1");
			ok(oSelect.getList().getSelectedItem() === oExpectedItem.data(sap.m.SelectRenderer.CSS_CLASS + "ListItem"));
			// strictEqual(oSelect.getValue(), "item 1");	// not implemented

			// cleanup
			oSelect.destroy();
		});

		test("getSelectedKey()", function() {

			// system under test
			var oSelect = new sap.m.Select({
				items: []
			});

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();

			// assertions
			ok(oSelect.getSelectedItem() === null);
			strictEqual(oSelect.getSelectedItemId(), "");
			strictEqual(oSelect.getSelectedKey(), "");
			ok(oSelect.getList().getSelectedItem() === null);
			// strictEqual(oSelect.getValue(), "");	// not implemented

			// cleanup
			oSelect.destroy();
		});

		test("getSelectedKey()", function() {

			// system under test
			var oExpectedItem;
			var oSelect = new sap.m.Select({
				items: [
					oExpectedItem = new sap.ui.core.Item({
						id: "item-id",
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					}),

					new sap.ui.core.Item({
						key: "2",
						text: "item 2"
					})
				],

				selectedItem: null
			});

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();

			// assertions
			ok(oSelect.getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getSelectedItemId(), "item-id");
			strictEqual(oSelect.getSelectedKey(), "0");
			ok(oSelect.getList().getSelectedItem() === oExpectedItem.data(sap.m.SelectRenderer.CSS_CLASS + "ListItem"));
			// strictEqual(oSelect.getValue(), "item 0");	// not implemented

			// cleanup
			oSelect.destroy();
		});

		test("getSelectedKey()", function() {

			// system under test
			var oExpectedItem;
			var oSelect = new sap.m.Select({
				items: [
					oExpectedItem = new sap.ui.core.Item({
						id: "item-id",
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					}),

					new sap.ui.core.Item({
						key: "2",
						text: "item 2"
					})
				],

				selectedItemId: undefined
			});

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();

			// assertions
			ok(oSelect.getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getSelectedItemId(), "item-id");
			strictEqual(oSelect.getSelectedKey(), "0");
			ok(oSelect.getList().getSelectedItem() === oExpectedItem.data(sap.m.SelectRenderer.CSS_CLASS + "ListItem"));
			// strictEqual(oSelect.getValue(), "item 0");	// not implemented

			// cleanup
			oSelect.destroy();
		});

		test("getSelectedKey()", function() {

			// system under test
			var oExpectedItem;
			var oSelect = new sap.m.Select({
				items: [
					oExpectedItem = new sap.ui.core.Item({
						id: "item-id",
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					}),

					new sap.ui.core.Item({
						key: "2",
						text: "item 2"
					})
				],

				selectedItemId: ""
			});

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();

			// assertions
			ok(oSelect.getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getSelectedItemId(), "item-id");
			strictEqual(oSelect.getSelectedKey(), "0");
			ok(oSelect.getList().getSelectedItem() === oExpectedItem.data(sap.m.SelectRenderer.CSS_CLASS + "ListItem"));
			// strictEqual(oSelect.getValue(), "item 0");	// not implemented

			// cleanup
			oSelect.destroy();
		});

		test("getSelectedKey()", function() {

			// system under test
			var oExpectedItem;
			var oSelect = new sap.m.Select({
				items: [
					oExpectedItem = new sap.ui.core.Item({
						id: "item-id",
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					}),

					new sap.ui.core.Item({
						key: "2",
						text: "item 2"
					})
				],

				selectedKey: "0"
			});

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();

			// assertions
			ok(oSelect.getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getSelectedItemId(), "item-id");
			strictEqual(oSelect.getSelectedKey(), "0");
			ok(oSelect.getList().getSelectedItem() === oExpectedItem.data(sap.m.SelectRenderer.CSS_CLASS + "ListItem"));
			// strictEqual(oSelect.getValue(), "item 0");	// not implemented

			// cleanup
			oSelect.destroy();
		});

		/* ------------------------------ */
		/* getSelectedItemId()            */
		/* ------------------------------ */

		test("getSelectedItemId()", function() {

			// system under test
			var oExpectedItem;
			var oSelect = new sap.m.Select({
				items: [
					oExpectedItem = new sap.ui.core.Item({
						id: "item-id",
						key: "0",
						text: "item 0"
					})
				]
			});

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();

			// assertions
			ok(oSelect.getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getSelectedItemId(), "item-id");
			strictEqual(oSelect.getSelectedKey(), "0");
			ok(oSelect.getList().getSelectedItem() === oExpectedItem.data(sap.m.SelectRenderer.CSS_CLASS + "ListItem"));
			// strictEqual(oSelect.getValue(), "item 0");	// not implemented

			// cleanup
			oSelect.destroy();
		});

		test("getSelectedItemId()", function() {

			// system under test
			var oExpectedItem;
			var oSelect = new sap.m.Select({
				items: [
					new sap.ui.core.Item({
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					}),

					oExpectedItem = new sap.ui.core.Item({
						id: "item-id",
						key: "2",
						text: "item 2"
					}),

					new sap.ui.core.Item({
						key: "3",
						text: "item 3"
					})
				],

				selectedItem: "item-id"
			});

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();

			// assertions
			ok(oSelect.getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getSelectedItemId(), "item-id");
			strictEqual(oSelect.getSelectedKey(), "2");
			ok(oSelect.getList().getSelectedItem() === oExpectedItem.data(sap.m.SelectRenderer.CSS_CLASS + "ListItem"));
			// strictEqual(oSelect.getValue(), "item 2");	// not implemented

			// cleanup
			oSelect.destroy();
		});

		test("getSelectedItemId()", function() {

			// system under test
			var oExpectedItem;
			var oSelect = new sap.m.Select({
				selectedItem: "item-id",

				items: [
					new sap.ui.core.Item({
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					}),

					new sap.ui.core.Item({
						key: "2",
						text: "item 2"
					}),

					oExpectedItem = new sap.ui.core.Item({
						id: "item-id",
						key: "3",
						text: "item 3"
					})
				]
			});

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();

			// assertions
			ok(oSelect.getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getSelectedItemId(), "item-id");
			strictEqual(oSelect.getSelectedKey(), "3");
			ok(oSelect.getList().getSelectedItem() === oExpectedItem.data(sap.m.SelectRenderer.CSS_CLASS + "ListItem"));
			// strictEqual(oSelect.getValue(), "item 3");	// not implemented

			// cleanup
			oSelect.destroy();
		});

		test("getSelectedItemId()", function() {

			// system under test
			var oExpectedItem;
			var oSelect = new sap.m.Select({
				selectedKey: "1",

				items: [
					new sap.ui.core.Item({
						key: "0",
						text: "item 0"
					}),

					oExpectedItem = new sap.ui.core.Item({
						id: "item-id",
						key: "1",
						text: "item 1"
					}),

					new sap.ui.core.Item({
						key: "2",
						text: "item 2"
					})
				]
			});

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();

			// assertions
			ok(oSelect.getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getSelectedItemId(), "item-id");
			strictEqual(oSelect.getSelectedKey(), "1");
			ok(oSelect.getList().getSelectedItem() === oExpectedItem.data(sap.m.SelectRenderer.CSS_CLASS + "ListItem"));
			// strictEqual(oSelect.getValue(), "item 1");	// not implemented

			// cleanup
			oSelect.destroy();
		});

		test("getSelectedItemId()", function() {

			// system under test
			var oSelect = new sap.m.Select({
				items: []
			});

			// assertions
			ok(oSelect.getSelectedItem() === null);
			strictEqual(oSelect.getSelectedItemId(), "");
			strictEqual(oSelect.getSelectedKey(), "");
			ok(oSelect.getList().getSelectedItem() === null);
			// strictEqual(oSelect.getValue(), ""); not implemented

			// cleanup
			oSelect.destroy();
		});

		test("getSelectedItemId()", function() {

			// system under test
			var oExpectedItem;
			var oSelect = new sap.m.Select({
				items: [
					oExpectedItem = new sap.ui.core.Item({
						id: "item-id",
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					}),

					new sap.ui.core.Item({
						key: "2",
						text: "item 2"
					})
				],

				selectedItem: null
			});

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();

			// assertions
			ok(oSelect.getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getSelectedItemId(), "item-id");
			strictEqual(oSelect.getSelectedKey(), "0");
			ok(oSelect.getList().getSelectedItem() === oExpectedItem.data(sap.m.SelectRenderer.CSS_CLASS + "ListItem"));
			// strictEqual(oSelect.getValue(), "item 0");	// not implemented

			// cleanup
			oSelect.destroy();
		});

		test("getSelectedItemId()", function() {

			// system under test
			var oExpectedItem;
			var oSelect = new sap.m.Select({
				items: [
					oExpectedItem = new sap.ui.core.Item({
						id: "item-id",
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					}),

					new sap.ui.core.Item({
						key: "2",
						text: "item 2"
					})
				],

				selectedItemId: undefined
			});

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();

			// assertions
			ok(oSelect.getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getSelectedItemId(), "item-id");
			strictEqual(oSelect.getSelectedKey(), "0");
			ok(oSelect.getList().getSelectedItem() === oExpectedItem.data(sap.m.SelectRenderer.CSS_CLASS + "ListItem"));
			// strictEqual(oSelect.getValue(), "item 0");	// not implemented

			// cleanup
			oSelect.destroy();
		});

		test("getSelectedItemId()", function() {

			// system under test
			var oExpectedItem;
			var oSelect = new sap.m.Select({
				items: [
					oExpectedItem = new sap.ui.core.Item({
						id: "item-id",
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					}),

					new sap.ui.core.Item({
						key: "2",
						text: "item 2"
					})
				],

				selectedItemId: ""
			});

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();

			// assertions
			ok(oSelect.getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getSelectedItemId(), "item-id");
			strictEqual(oSelect.getSelectedKey(), "0");
			ok(oSelect.getList().getSelectedItem() === oExpectedItem.data(sap.m.SelectRenderer.CSS_CLASS + "ListItem"));
			// strictEqual(oSelect.getValue(), "item 0");	// not implemented

			// cleanup
			oSelect.destroy();
		});

		test("getSelectedItemId()", function() {

			// system under test
			var oExpectedItem;
			var oSelect = new sap.m.Select({
				items: [
					oExpectedItem = new sap.ui.core.Item({
						id: "item-id",
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					}),

					new sap.ui.core.Item({
						key: "2",
						text: "item 2"
					})
				],

				selectedKey: undefined
			});

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();

			// assertions
			ok(oSelect.getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getSelectedItemId(), "item-id");
			strictEqual(oSelect.getSelectedKey(), "0");
			ok(oSelect.getList().getSelectedItem() === oExpectedItem.data(sap.m.SelectRenderer.CSS_CLASS + "ListItem"));
			// strictEqual(oSelect.getValue(), "item 0");	// not implemented

			// cleanup
			oSelect.destroy();
		});

		test("getSelectedItemId()", function() {

			// system under test
			var oExpectedItem;
			var oSelect = new sap.m.Select({
				items: [
					oExpectedItem = new sap.ui.core.Item({
						id: "item-id",
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					}),

					new sap.ui.core.Item({
						key: "2",
						text: "item 2"
					})
				],

				selectedKey: ""
			});

			// assertions
			ok(oSelect.getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getSelectedItemId(), "item-id");
			strictEqual(oSelect.getSelectedKey(), "0");
			ok(oSelect.getList().getSelectedItem() === oExpectedItem.data(sap.m.SelectRenderer.CSS_CLASS + "ListItem"));
			// strictEqual(oSelect.getValue(), "item 0");	// not implemented

			// cleanup
			oSelect.destroy();
		});

		/* ------------------------------ */
		/* setName()                      */
		/* ------------------------------ */

		test("setName()", function() {

			// system under test
			var oSelect = new sap.m.Select({
				items: [
					new sap.ui.core.Item({
						key: "0",
						text: "item 0"
					})
				]
			});

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();

			// act
			oSelect.setName("select-name0");
			sap.ui.getCore().applyChanges();

			// assertions
			if (oSelect._isRequiredSelectElement()) {
				strictEqual(oSelect.$().children("select").attr("name"), "select-name0", 'The attribute name is "select-name0"');
			}

			// cleanup
			oSelect.destroy();
		});

		/* ------------------------------ */
		/* setWidth()                     */
		/* ------------------------------ */

		test("setWidth()", function() {

			// system under test
			var oSelect = new sap.m.Select({
				items: [
					new sap.ui.core.Item({
						key: "0",
						text: "item 0"
					})
				]
			});

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();

			// act
			oSelect.setWidth("400px");
			sap.ui.getCore().applyChanges();

			// assertions
			strictEqual(oSelect.$().outerWidth() + "px", "400px");

			// cleanup
			oSelect.destroy();
		});

		/* ------------------------------ */
		/* setEnabled()                   */
		/* ------------------------------ */

		test("setEnabled()", function() {

			// system under test
			var oSelect = new sap.m.Select({
				items: [
					new sap.ui.core.Item({
						key: "0",
						text: "item 0"
					})
				]
			});

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();

			// act
			oSelect.setEnabled(false);
			sap.ui.getCore().applyChanges();

			// assertions
			ok(oSelect.$().hasClass(sap.m.SelectRenderer.CSS_CLASS + "Disabled"), 'If the select control is disabled, it should have the CSS class "' + sap.m.SelectRenderer.CSS_CLASS + "Disabled");

			// cleanup
			oSelect.destroy();
		});

		/* ------------------------------ */
		/* addItem                        */
		/* ------------------------------ */

		test("addItem()", function() {

			// system under test
			var oSelect = new sap.m.Select();

			// arrange
			var fnAddAggregationSpy = this.spy(oSelect, "addAggregation");
			var fnListAddAggregationSpy = this.spy(oSelect.getList(), "addAggregation");
			var fnAddItemSpy = this.spy(oSelect, "addItem");
			var oItem = new sap.ui.core.Item({
				key: "0",
				text: "item 0"
			});

			// act
			oSelect.addItem(oItem);

			// assertions
			ok(fnAddAggregationSpy.calledWith("items", oItem), "sap.m.Select.addAggregation() method was called with the expected arguments");
			ok(fnListAddAggregationSpy.calledWith("items", oItem.data(sap.m.SelectRenderer.CSS_CLASS + "ListItem")), "sap.m.List.addAggregation() method was called with the expected arguments");
			ok(fnAddItemSpy.returned(oSelect));
			ok(oItem.data(sap.m.SelectRenderer.CSS_CLASS + "ItemVisible"), "The item is marked as visible");

			// cleanup
			oSelect.destroy();
		});

		/* ------------------------------ */
		/* insertItem                     */
		/* ------------------------------ */

		test("insertItem()", function() {

			// system under test
			var oSelect = new sap.m.Select();

			// arrange
			var fnInsertAggregation = this.spy(oSelect, "insertAggregation");
			var fnListInsertAggregation = this.spy(oSelect.getList(), "insertAggregation");
			var fnInsertItem = this.spy(oSelect, "insertItem");
			var oItem = new sap.ui.core.Item({
				key: "0",
				text: "item 0"
			});

			// act
			oSelect.insertItem(oItem, 0);

			// assertions
			ok(fnInsertAggregation.calledWith("items", oItem, 0), "oSelect.insertAggregation() method was called with the expected arguments");
			ok(fnListInsertAggregation.calledWith("items", oItem.data(sap.m.SelectRenderer.CSS_CLASS + "ListItem"), 0), "oList.insertAggregation() method was called with the expected arguments");
			ok(fnInsertItem.returned(oSelect), 'oSelect.insertAggregation() method return the "this" reference');
			ok(oItem.data(sap.m.SelectRenderer.CSS_CLASS + "ItemVisible"), "The item is marked as visible");

			// cleanup
			oSelect.destroy();
		});

		/* ------------------------------ */
		/* setSelectedItem()              */
		/* ------------------------------ */

		test("setSelectedItem() should give a warning when called with faulty parameter", function() {

			// system under test
			var oSelect = new sap.m.Select();

			// arrange
			var fnSetPropertySpy = this.spy(oSelect, "setProperty"),
				fnSetAssociationSpy = this.spy(oSelect, "setAssociation"),
				fnWarningSpy = this.spy(jQuery.sap.log, "warning"),
				fnFireChangeSpy = this.spy(oSelect, "fireChange"),
				fnSetSelectedItemSpy = this.spy(oSelect, "setSelectedItem");

			// act
			oSelect.setSelectedItem({});

			// assertions
			strictEqual(fnSetPropertySpy.callCount, 0, "sap.m.Select.prototype.setProperty() method was not called");
			strictEqual(fnSetAssociationSpy.callCount, 0, "sap.m.Select.prototype.setAssociation() method was not called");
			strictEqual(fnWarningSpy.callCount, 1, "jQuery.sap.log.warning() method was called");
			strictEqual(fnFireChangeSpy.callCount, 0, "The change event was not fired");
			ok(fnSetSelectedItemSpy.returned(oSelect), 'sap.m.Select.prototype.setSelectedItem() method return the "this" reference');
			ok(oSelect.getSelectedItem() === null);
			strictEqual(oSelect.getSelectedItemId(), "");
			strictEqual(oSelect.getSelectedKey(), "");
			ok(oSelect.getList().getSelectedItem() === null);
			// strictEqual(oSelect.getValue(), "");	// not implemented

			// cleanup
			oSelect.destroy();
		});

		test("setSelectedItem()", function() {

			// system under test
			var oExpectedItem;
			var oSelect = new sap.m.Select({
				items: [
					new sap.ui.core.Item({
						key: "0",
						text: "item 0"
					}),

					oExpectedItem = new sap.ui.core.Item({
						id: "item-id",
						key: "1",
						text: "item 1"
					}),

					new sap.ui.core.Item({
						key: "2",
						text: "item 2",
						enabled: false
					})
				]
			});

			// arrange
			var fnSetPropertySpy = this.spy(oSelect, "setProperty"),
				fnSetAssociationSpy = this.spy(oSelect, "setAssociation"),
				fnFireChangeSpy = this.spy(oSelect, "fireChange"),
				fnSetSelectedItemSpy = this.spy(oSelect, "setSelectedItem");

			// act
			oSelect.setSelectedItem(oExpectedItem);

			// assertions
			strictEqual(fnSetPropertySpy.callCount, 2, 'setProperty() method was called twice, once for the "id" and once for the "key"');
			strictEqual(fnSetAssociationSpy.callCount, 1, "setAssociation() method was called");
			ok(fnSetAssociationSpy.calledWith("selectedItem", oExpectedItem));
			ok(fnSetPropertySpy.calledWith("selectedItemId", "item-id"));
			ok(fnSetPropertySpy.calledWith("selectedKey", "1"));
			ok(oSelect.getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getSelectedItemId(), "item-id");
			strictEqual(oSelect.getSelectedKey(), "1");
			ok(oSelect.getList().getSelectedItem() === oExpectedItem.data(sap.m.SelectRenderer.CSS_CLASS + "ListItem"));
			ok(fnSetSelectedItemSpy.returned(oSelect), 'sap.m.Select.prototype.setSelectedItem() method return the "this" reference');
			strictEqual(fnFireChangeSpy.callCount, 0, "The change event was not fired");

			// cleanup
			oSelect.destroy();
		});

		test("setSelectedItem()", function() {

			// system under test
			var oExpectedItem;
			var oSelect = new sap.m.Select({
				items: [
					new sap.ui.core.Item({
						key: "0",
						text: "item 0"
					}),

					oExpectedItem = new sap.ui.core.Item({
						id: "item-id",
						key: "1",
						text: "item 1"
					}),

					new sap.ui.core.Item({
						key: "2",
						text: "item 2",
						enabled: false
					})
				]
			});

			// arrange
			var fnSetPropertySpy = this.spy(oSelect, "setProperty"),
				fnSetAssociationSpy = this.spy(oSelect, "setAssociation"),
				fnFireChangeSpy = this.spy(oSelect, "fireChange"),
				fnSetSelectedItemSpy = this.spy(oSelect, "setSelectedItem");

			// act
			oSelect.setSelectedItem("item-id");

			// assertions
			strictEqual(fnSetPropertySpy.callCount, 2, 'setProperty() method was called twice, once for the "id" and once for the "key"');
			strictEqual(fnSetAssociationSpy.callCount, 1, "setAssociation() method was called");
			ok(fnSetAssociationSpy.calledWith("selectedItem", oExpectedItem));
			ok(fnSetPropertySpy.calledWith("selectedItemId", "item-id"));
			ok(fnSetPropertySpy.calledWith("selectedKey", "1"));
			ok(oSelect.getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getSelectedItemId(), "item-id");
			strictEqual(oSelect.getSelectedKey(), "1");
			ok(oSelect.getList().getSelectedItem() === oExpectedItem.data(sap.m.SelectRenderer.CSS_CLASS + "ListItem"));
			ok(fnSetSelectedItemSpy.returned(oSelect), 'sap.m.Select.prototype.setSelectedItem() method return the "this" reference');
			strictEqual(fnFireChangeSpy.callCount, 0, "The change event was not fired");
			sap.ui.getCore().applyChanges();
			strictEqual(fnGetDomRefs(oSelect.getId()).$Label.text(), "");

			// cleanup
			oSelect.destroy();
		});

		test("setSelectedItem()", function() {

			//system under test
			var oExpectedItem;
			var oSelect = new sap.m.Select({
				items: [
					new sap.ui.core.Item({
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					}),

					oExpectedItem = new sap.ui.core.Item({
						id: "item-id",
						key: "2",
						text: "item 2"
					})
				]
			});

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();

			// act
			oSelect.setSelectedItem(oExpectedItem);

			// assertions
			ok(oSelect.getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getSelectedItemId(), "item-id");
			strictEqual(oSelect.getSelectedKey(), "2");
			ok(oSelect.getList().getSelectedItem() === oExpectedItem.data(sap.m.SelectRenderer.CSS_CLASS + "ListItem"));
			// strictEqual(oSelect.getValue(), "item 2");	// not implemented
			strictEqual(fnGetDomRefs(oSelect.getId()).$Label.text(), "item 2");

			// cleanup
			oSelect.destroy();
		});

		test("setSelectedItem()", function() {

			//system under test
			var oExpectedItem;
			var oSelect = new sap.m.Select({
				items: [
					oExpectedItem = new sap.ui.core.Item({
						id: "item-id",
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					}),

					new sap.ui.core.Item({
						key: "2",
						text: "item 2"
					})
				],

				selectedKey: "2"
			});

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();

			// act
			oSelect.setSelectedItem(null);

			// assertions
			ok(oSelect.getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getSelectedItemId(), "item-id");
			strictEqual(oSelect.getSelectedKey(), "0");
			ok(oSelect.getList().getSelectedItem() === oExpectedItem.data(sap.m.SelectRenderer.CSS_CLASS + "ListItem"));
			// strictEqual(oSelect.getValue(), "item 0");	// not implemented
			strictEqual(fnGetDomRefs(oSelect.getId()).$Label.text(), "item 0");

			// cleanup
			oSelect.destroy();
		});

		test("setSelectedItem() set the selected item when the Select popup menu is open", function() {

			// system under test
			var oExpectedItem;
			var oSelect = new sap.m.Select({
				items: [
					oExpectedItem = new sap.ui.core.Item({
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					}),

					new sap.ui.core.Item({
						key: "2",
						text: "item 2"
					})
				],

				selectedKey: "2"
			});

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();

			oSelect.open();
			this.clock.tick(500);

			// act
			oSelect.setSelectedItem(null);

			// assertion
			ok(oSelect.getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getSelectedItemId(), oExpectedItem.getId());
			strictEqual(oSelect.getSelectedKey(), "0");
			ok(oSelect.getList().getSelectedItem() === oExpectedItem.data(sap.m.SelectRenderer.CSS_CLASS + "ListItem"));
			// strictEqual(oSelect.getValue(), "item 2");	// not implemented
			strictEqual(fnGetDomRefs(oSelect.getId()).$Label.text(), "item 0");

			// cleanup
			oSelect.destroy();
		});

		/* ------------------------------ */
		/* setSelectedItemId()            */
		/* ------------------------------ */

		test("setSelectedItemId() should give a warning when called with faulty parameter", function() {

			// system under test
			var oSelect = new sap.m.Select();

			// arrange
			var fnSetPropertySpy = this.spy(oSelect, "setProperty"),
				fnSetAssociationSpy = this.spy(oSelect, "setAssociation"),
				fnWarningSpy = this.spy(jQuery.sap.log, "warning"),
				fnFireChangeSpy = this.spy(oSelect, "fireChange"),
				fnSetSelectedItemIdSpy = this.spy(oSelect, "setSelectedItemId");

			// act
			oSelect.setSelectedItemId({});

			// assertions
			strictEqual(fnSetPropertySpy.callCount, 0, "sap.m.Select.prototype.setProperty() method was not called");
			strictEqual(fnSetAssociationSpy.callCount, 0, "sap.m.Select.prototype.setAssociation() method was not called");
			strictEqual(fnFireChangeSpy.callCount, 0, "The change event was not fired");
			strictEqual(fnWarningSpy.callCount, 1, "jQuery.sap.log.warning() method was called");
			ok(fnSetSelectedItemIdSpy.returned(oSelect), 'sap.m.Select.prototype.setSelectedItemId() method return the "this" reference');
			ok(oSelect.getSelectedItem() === null);
			strictEqual(oSelect.getSelectedItemId(), "");
			strictEqual(oSelect.getSelectedKey(), "");
			ok(oSelect.getList().getSelectedItem() === null);
			// strictEqual(oSelect.getValue(), "");	// not implemented
			sap.ui.getCore().applyChanges();
			strictEqual(fnGetDomRefs(oSelect.getId()).$Label.text(), "");

			// cleanup
			oSelect.destroy();
		});

		test("setSelectedItemId()", function() {

			// system under test
			var oExpectedItem;
			var oSelect = new sap.m.Select({
				items: [
					new sap.ui.core.Item({
						key: "0",
						text: "item 0"
					}),

					oExpectedItem = new sap.ui.core.Item({
						id: "item-id",
						key: "1",
						text: "item 1"
					}),

					new sap.ui.core.Item({
						key: "2",
						text: "item 2",
						enabled: false
					})
				]
			});

			// arrange
			var fnSetPropertySpy = this.spy(oSelect, "setProperty"),
				fnSetAssociationSpy = this.spy(oSelect, "setAssociation"),
				fnFireChangeSpy = this.spy(oSelect, "fireChange"),
				fnSetSelectedItemIdSpy = this.spy(oSelect, "setSelectedItemId");

			// act
			oSelect.setSelectedItemId("item-id");

			// assertions
			strictEqual(fnSetPropertySpy.callCount, 2, 'setProperty() method was called twice, once for the "id" and once for the "key"');
			strictEqual(fnSetAssociationSpy.callCount, 1, "setAssociation() method was called");
			strictEqual(fnFireChangeSpy.callCount, 0, "The change event was not fired");
			ok(fnSetPropertySpy.calledWith("selectedKey", "1"));
			ok(fnSetPropertySpy.calledWith("selectedItemId", "item-id"));
			ok(fnSetAssociationSpy.calledWith("selectedItem", oExpectedItem));
			ok(fnSetSelectedItemIdSpy.returned(oSelect), 'sap.m.Select.prototype.setSelectedItemId() method return the "this" reference');
			ok(oSelect.getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getSelectedItemId(), "item-id");
			strictEqual(oSelect.getSelectedKey(), "1");
			ok(oSelect.getList().getSelectedItem() === oExpectedItem.data(sap.m.SelectRenderer.CSS_CLASS + "ListItem"));
			// strictEqual(oSelect.getValue(), "item 1");	// not implemented
			sap.ui.getCore().applyChanges();
			strictEqual(fnGetDomRefs(oSelect.getId()).$Label.text(), "");

			// cleanup
			oSelect.destroy();
		});

		test("setSelectedItemId()", function() {

			//system under test
			var oExpectedItem;
			var oSelect = new sap.m.Select({
				items: [
					new sap.ui.core.Item({
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					}),

					oExpectedItem = new sap.ui.core.Item({
						id: "item-id",
						key: "2",
						text: "item 2"
					})
				]
			});

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();

			// act
			oSelect.setSelectedItemId("item-id");

			// assertions
			ok(oSelect.getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getSelectedItemId(), "item-id");
			strictEqual(oSelect.getSelectedKey(), "2");
			ok(oSelect.getList().getSelectedItem() === oExpectedItem.data(sap.m.SelectRenderer.CSS_CLASS + "ListItem"));
			// strictEqual(oSelect.getValue(), "item 2");	// not implemented
			strictEqual(fnGetDomRefs(oSelect.getId()).$Label.text(), "item 2");

			// cleanup
			oSelect.destroy();
		});

		test("setSelectedItemId()", function() {

			//system under test
			var oExpectedItem;
			var oSelect = new sap.m.Select({
				items: [
					oExpectedItem = new sap.ui.core.Item({
						id: "item-id",
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					}),

					new sap.ui.core.Item({
						key: "2",
						text: "item 2"
					})
				],

				selectedKey: "2"
			});

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();

			// act
			oSelect.setSelectedItemId("")

			// assertions
			ok(oSelect.getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getSelectedItemId(), "item-id");
			strictEqual(oSelect.getSelectedKey(), "0");
			ok(oSelect.getList().getSelectedItem() === oExpectedItem.data(sap.m.SelectRenderer.CSS_CLASS + "ListItem"));
			// strictEqual(oSelect.getValue(), "item 2");	// not implemented
			strictEqual(fnGetDomRefs(oSelect.getId()).$Label.text(), "item 0");

			// cleanup
			oSelect.destroy();
		});

		test("setSelectedItemId() set the selected item when the Select popup menu is open", function() {

			// system under test
			var oExpectedItem;
			var oSelect = new sap.m.Select({
				items: [
					oExpectedItem = new sap.ui.core.Item({
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					}),

					new sap.ui.core.Item({
						key: "2",
						text: "item 2"
					})
				],

				selectedKey: "2"
			});

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();

			oSelect.open();
			this.clock.tick(500);

			// act
			oSelect.setSelectedItemId("");

			// assertion
			ok(oSelect.getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getSelectedItemId(), oExpectedItem.getId());
			strictEqual(oSelect.getSelectedKey(), "0");
			ok(oSelect.getList().getSelectedItem() === oExpectedItem.data(sap.m.SelectRenderer.CSS_CLASS + "ListItem"));
			// strictEqual(oSelect.getValue(), "item 0");	// not implemented
			strictEqual(fnGetDomRefs(oSelect.getId()).$Label.text(), "item 0");

			// cleanup
			oSelect.destroy();
		});

		/* ------------------------------ */
		/* setSelectedKey()               */
		/* ------------------------------ */

		test("setSelectedKey() first rendering", function() {

			// system under test
			var oExpectedItem;
			var oSelect = new sap.m.Select({

				selectedKey: "2",

				items: [
					new sap.ui.core.Item({
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					}),

					oExpectedItem = new sap.ui.core.Item({
						id: "item-id",
						key: "2",
						text: "item 2"
					})
				]
			});

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();

			// assertions
			ok(oSelect.getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getSelectedItemId(), "item-id");
			strictEqual(oSelect.getSelectedKey(), "2");
			ok(oSelect.getList().getSelectedItem() === oExpectedItem.data(sap.m.SelectRenderer.CSS_CLASS + "ListItem"));
			// strictEqual(oSelect.getValue(), "item 2");	// not implemented
			strictEqual(fnGetDomRefs(oSelect.getId()).$Label.text(), "item 2");

			// cleanup
			oSelect.destroy();
		});

		test("setSelectedKey() no rendering", function() {

			// system under test
			var oExpectedItem;
			var oSelect = new sap.m.Select({
				items: [
					new sap.ui.core.Item({
						key: "0",
						text: "item 0"
					}),

					oExpectedItem = new sap.ui.core.Item({
						id: "item-id",
						key: "1",
						text: "item 1"
					}),

					new sap.ui.core.Item({
						key: "2",
						text: "item 2"
					})
				],

				selectedKey: "1"
			});

			// assertions
			ok(oSelect.getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getSelectedItemId(), "item-id");
			strictEqual(oSelect.getSelectedKey(), "1");
			ok(oSelect.getList().getSelectedItem() === oExpectedItem.data(sap.m.SelectRenderer.CSS_CLASS + "ListItem"));
			// strictEqual(oSelect.getValue(), "item 2");	// not implemented
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();
			strictEqual(fnGetDomRefs(oSelect.getId()).$Label.text(), "item 1");

			// cleanup
			oSelect.destroy();
		});

		test("setSelectedKey() after the initial rendering", function() {

			// system under test
			var oExpectedItem;
			var oSelect = new sap.m.Select({
				items: [
					new sap.ui.core.Item({
						key: "0",
						text: "item 0"
					}),

					oExpectedItem = new sap.ui.core.Item({
						id: "item-id",
						key: "1",
						text: "item 1"
					}),

					new sap.ui.core.Item({
						key: "2",
						text: "item 2"
					})
				]
			});

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();

			var fnSetPropertySpy = this.spy(oSelect, "setProperty"),
				fnSetAssociationSpy = this.spy(oSelect, "setAssociation"),
				fnFireChangeSpy = this.spy(oSelect, "fireChange"),
				fnSetSelectedKeySpy = this.spy(oSelect, "setSelectedKey");

			// act
			oSelect.setSelectedKey("1");

			// assertions
			strictEqual(fnSetPropertySpy.callCount, 2, 'setProperty() method was called twice, once for the "id" and once for the "key"');
			strictEqual(fnSetAssociationSpy.callCount, 1, "setAssociation() method was called");
			strictEqual(fnFireChangeSpy.callCount, 0, "The change event was not fired");
			ok(fnSetPropertySpy.calledWith("selectedKey", "1"));
			ok(fnSetPropertySpy.calledWith("selectedItemId", "item-id"));
			ok(fnSetAssociationSpy.calledWith("selectedItem", oExpectedItem));
			ok(fnSetSelectedKeySpy.returned(oSelect), 'sap.m.Select.prototype.setSelectedKey() method return the "this" reference');
			ok(oSelect.getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getSelectedItemId(), "item-id");
			strictEqual(oSelect.getSelectedKey(), "1");
			ok(oSelect.getList().getSelectedItem() === oExpectedItem.data(sap.m.SelectRenderer.CSS_CLASS + "ListItem"));
			// strictEqual(oSelect.getValue(), "item 1");	// not implemented
			strictEqual(fnGetDomRefs(oSelect.getId()).$Label.text(), "item 1");

			// cleanup
			oSelect.destroy();
		});

		test("setSelectedKey()", function() {

			//system under test
			var oExpectedItem;
			var oSelect = new sap.m.Select({
				items: [
					oExpectedItem = new sap.ui.core.Item({
						id: "item-id",
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					}),

					new sap.ui.core.Item({
						key: "2",
						text: "item 2"
					})
				],

				selectedKey: "2"
			});

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();

			// act
			oSelect.setSelectedKey("");

			// assertions
			ok(oSelect.getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getSelectedItemId(), "item-id");
			strictEqual(oSelect.getSelectedKey(), "0");
			ok(oSelect.getList().getSelectedItem() === oExpectedItem.data(sap.m.SelectRenderer.CSS_CLASS + "ListItem"));
			// strictEqual(oSelect.getValue(), "item 0");	// not implemented
			strictEqual(fnGetDomRefs(oSelect.getId()).$Label.text(), "item 0");

			// cleanup
			oSelect.destroy();
		});

		test("setSelectedKey() set the selected item when the Select popup menu is open", function() {

			// system under test
			var oExpectedItem;
			var oSelect = new sap.m.Select({
				items: [
					oExpectedItem = new sap.ui.core.Item({
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					}),

					new sap.ui.core.Item({
						key: "2",
						text: "item 2"
					})
				],

				selectedKey: "2"
			});

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();

			oSelect.open();
			this.clock.tick(500);

			// act
			oSelect.setSelectedKey("");

			// assertion
			ok(oSelect.getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getSelectedItemId(), oExpectedItem.getId());
			strictEqual(oSelect.getSelectedKey(), "0");
			ok(oSelect.getList().getSelectedItem() === oExpectedItem.data(sap.m.SelectRenderer.CSS_CLASS + "ListItem"));
			// strictEqual(oSelect.getValue(), "item 0");	// not implemented
			strictEqual(fnGetDomRefs(oSelect.getId()).$Label.text(), "item 0");

			// cleanup
			oSelect.destroy();
		});

		/* ------------------------------ */
		/* removeItem()                   */
		/* ------------------------------ */

		test("removeItem() should give a warning when called with faulty parameter", function() {

			// system under test
			var oSelect = new sap.m.Select();

			// arrange
			var fnRemoveAggregationSpy = this.spy(oSelect, "removeAggregation");
			var fnListRemoveAggregationSpy = this.spy(oSelect.getList(), "removeAggregation");
			var fnRemoveItemSpy = this.spy(oSelect, "removeItem");
			var fnFireChangeSpy = this.spy(oSelect, "fireChange");

			// act
			oSelect.removeItem(undefined);

			// assertions
			strictEqual(fnRemoveAggregationSpy.callCount, 1, "sap.m.Select.prototype.removeAggregation() method was called");
			strictEqual(fnListRemoveAggregationSpy.callCount, 1, "sap.m.List.prototype.removeAggregation() method was called");
			ok(fnRemoveAggregationSpy.calledWith("items", undefined), "sap.m.Select.prototype.removeAggregation() method was called with the expected argument");
			ok(fnListRemoveAggregationSpy.calledWith("items", null), "sap.m.List.prototype.removeAggregation() method was called with the expected argument");
			strictEqual(fnFireChangeSpy.callCount, 0, "The change event is not fired");
			ok(fnRemoveItemSpy.returned(null), "sap.m.Select.prototype.removeItem() method returns null");

			// cleanup
			oSelect.destroy();
		});

		test("removeItem() remove the selected item", function() {

			// system under test
			var oSelect = new sap.m.Select({
				items: {
					path: "/items",
					template: new sap.ui.core.Item({
						key: "{value}",
						text: "{text}"
					})
				},

				selectedKey: {
					path: "/selected",
					template: "{selected}"
				}
			});

			// arrange
			var oModel = new sap.ui.model.json.JSONModel();
			var fnRemoveAggregationSpy = this.spy(oSelect, "removeAggregation");
			var fnListRemoveAggregationSpy = this.spy(oSelect.getList(), "removeAggregation");
			var mData = {
				"items": [
					{
						"value": "0",
						"text": "item 0"
					},

					{
						"value": "1",
						"text": "item 1"
					},

					{
						"value": "2",
						"text": "item 2"
					},

					{
						"value": "3",
						"text": "item 3"
					},

					{
						"value": "4",
						"text": "item 4"
					},

					{
						"value": "5",
						"text": "item 5"
					},

					{
						"value": "6",
						"text": "item 6"
					},

					{
						"value": "7",
						"text": "item 7"
					},

					{
						"value": "8",
						"text": "item 8"
					},
				],

				"selected": "8"
			};

			oModel.setData(mData);
			sap.ui.getCore().setModel(oModel);
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();

			// act
			oSelect.removeItem(8);

			// assertions
			strictEqual(fnRemoveAggregationSpy.callCount, 1, "sap.m.Select.prototype.removeAggregation() method was called");
			strictEqual(fnListRemoveAggregationSpy.callCount, 1, "sap.m.List.prototype.removeAggregation() method was called");
			ok(fnRemoveAggregationSpy.calledWith("items", 8), "sap.m.Select.prototype.removeAggregation() method was called with the expected argument");
			strictEqual(oSelect.getSelectedKey(), "0");
			strictEqual(oSelect.getSelectedItem().getText(), "item 0");
			strictEqual(oSelect.getList().getSelectedItem().getTitle(), "item 0");
			// strictEqual(oSelect.getValue(), "item 0");	// not implemented
			strictEqual(fnGetDomRefs(oSelect.getId()).$Label.text(), "item 0");

			// cleanup
			oSelect.destroy();
		});

		test("removeItem() remove the selected item", function() {

			// system under test
			var oSelect = new sap.m.Select({

				items: {
					path: "/items",
					template: new sap.ui.core.Item({
						key: "{value}",
						text: "{text}"
					})
				},

				selectedKey: {
					path : "/selected",
					template: "{selected}"
				},

				change: function(oControlEvent) {
					jQuery.sap.log.info('Event fired: "change" value property to ' + oControlEvent.getParameter("selectedItem"));
				}
			});

			// arrange
			var oModel = new sap.ui.model.json.JSONModel();

			var mData = {
				"items" : [
					{
						"value": "0",
						"text": "item 0"
					},

					{
						"value": "1",
						"text": "item 1"
					},

					{
						"value": "2",
						"text": "item 2"
					},

					{
						"value": "3",
						"text": "item 3"
					}
				],

				"selected": "0"
			};

			oModel.setData(mData);
			sap.ui.getCore().setModel(oModel);

			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();

			// act
			oSelect.removeItem(0);
			sap.ui.getCore().applyChanges();

			// assertions
			strictEqual(oSelect.getSelectedItem().getId(), oSelect.getSelectedItemId());
			strictEqual(oSelect.getSelectedKey(), "1");
			strictEqual(oSelect.getSelectedItem().getText(), "item 1");
			strictEqual(oSelect.getList().getSelectedItem().getTitle(), "item 1");
			// strictEqual(oSelect.getValue(), "item 1");	// not implemented
			strictEqual(fnGetDomRefs(oSelect.getId()).$Label.text(), "item 1");

			// cleanup
			oSelect.destroy();
		});

		test("removeItem()", function() {

			// system under test
			var oExpectedItem;
			var oSelect = new sap.m.Select({
				items: [
					oExpectedItem = new sap.ui.core.Item({
						key: "0",
						text: "item 0"
					})
				]
			});

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();

			// act
			oSelect.removeItem(0);
			sap.ui.getCore().applyChanges();

			// assertions
			strictEqual(oSelect.getSelectedKey(), "");
			ok(oSelect.getSelectedItem() === null);
			strictEqual(oSelect.getSelectedItemId(), "");
			ok(oSelect.getList().getSelectedItem() === null);
			// strictEqual(oSelect.getValue(), "");	// not implemented
			strictEqual(fnGetDomRefs(oSelect.getId()).$Label.text(), "");
			ok(oExpectedItem.getDomRef() === null);
			ok(oExpectedItem.data(sap.m.SelectRenderer.CSS_CLASS + "ListItem").getDomRef() === null);

			// cleanup
			oSelect.destroy();
		});

		/* ------------------------------ */
		/* removeAllItems()               */
		/* ------------------------------ */

		test("removeAllItems()", function() {

			// system under test
			var aItems = [
				new sap.ui.core.Item({
					key: "0",
					text: "item 0"
				}),

				new sap.ui.core.Item({
					key: "1",
					text: "item 1"
				}),

				new sap.ui.core.Item({
					key: "2",
					text: "item 2"
				})
			];

			var oSelect = new sap.m.Select({
				items: aItems
			});

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();
			var fnRemoveAllItemsSpy = this.spy(oSelect, "removeAllItems");
			var fnRemoveAllAggregationSpy = this.spy(oSelect, "removeAllAggregation");
			var fnListRemoveAllItemsSpy = this.spy(oSelect.getList(), "removeAllItems");

			// act
			oSelect.removeAllItems();
			sap.ui.getCore().applyChanges();

			var mDomRefs = fnGetDomRefs(oSelect.getId());

			// assertions
			ok(fnRemoveAllAggregationSpy.calledWith("items"), "sap.m.Select.prototype.removeAllAggregation() method was called with the expected argument");
			strictEqual(fnListRemoveAllItemsSpy.callCount, 1, "sap.m.List.prototype.removeAllItems() method was called");
			ok(fnRemoveAllItemsSpy.returned(aItems), "sap.m.Select.prototype.removeAllItems() method returns an array of the removed items");
			ok(oSelect.getSelectedItem() === null);
			strictEqual(oSelect.getSelectedItemId(), "");
			strictEqual(oSelect.getSelectedKey(), "");
			ok(oSelect.getList().getSelectedItem() === null);
			// strictEqual(oSelect.getValue(), "");	// not implemented
			strictEqual(fnGetDomRefs(oSelect.getId()).$Label.text(), "");
			strictEqual(mDomRefs.$HtmlSelect.children().length, 1);

			// cleanup
			oSelect.destroy();
		});

		/* ------------------------------ */
		/* destroyItems()                 */
		/* ------------------------------ */

		test("destroyItems()", function() {

			// system under test
			var oSelect = new sap.m.Select({
				items: [
					new sap.ui.core.Item({
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					}),

					new sap.ui.core.Item({
						key: "2",
						text: "item 2"
					})
				]
			});

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();
			var fnDestroyItemsSpy = this.spy(oSelect, "destroyItems");

			// act
			oSelect.destroyItems();
			sap.ui.getCore().applyChanges();

			// assertions
			ok(fnDestroyItemsSpy.returned(oSelect), "sap.m.Select.prototype.destroyItems() method returns the Select instance");
			ok(oSelect.getList().getSelectedItem() === null);
			// strictEqual(oSelect.getValue(), "");	// not implemented
			strictEqual(fnGetDomRefs(oSelect.getId()).$Label.text(), "");
			strictEqual(fnGetDomRefs(oSelect.getId()).$HtmlSelect.children().length, 1);

			// cleanup
			oSelect.destroy();
		});

		/* ------------------------------ */
		/* open()                         */
		/* ------------------------------ */

		test("open()", function() {

			// system under test
			var oSelect = new sap.m.Select({
				items: [
					new sap.ui.core.Item({
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					}),

					new sap.ui.core.Item({
						key: "2",
						text: "item 2"
					})
				]
			});

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();
			document.documentElement.style.overflow = "hidden"; // hide scrollbar during test

			// act
			oSelect.open();
			this.clock.tick(1000);

			// assertions
			ok(oSelect.isOpen(), "Select is open");

			if (oSelect.getAutoAdjustWidth()) {
				return;
			}

			if (!sap.ui.Device.system.phone) {
				strictEqual(document.activeElement, oSelect.getFocusDomRef(), "The Select should get the focus");
			}

			ok(oSelect.hasStyleClass(sap.m.SelectRenderer.CSS_CLASS + "Pressed"));

			if (sap.ui.Device.system.desktop || sap.ui.Device.system.tablet) {
				strictEqual(oSelect.$().outerWidth(), oSelect.getPopup().$().outerWidth(), "The width of the pop-up is strictEqual to the width of the input");
				strictEqual(document.activeElement, oSelect.getFocusDomRef(), "The Select should get the focus");
			} else if (sap.ui.Device.system.phone) {
				strictEqual(oSelect.getPopup().$().width(), jQuery(window).width(), "The width of the pop-up is strictEqual to the width of the browser view port");
			}

			// cleanup
			oSelect.destroy();
			document.documentElement.style.overflow = ""; // restore scrollbar after test
		});

		test("open() check whether the active state persist after re-rendering", function() {

			// system under test
			var oSelect = new sap.m.Select({
				items: [
					new sap.ui.core.Item({
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					}),

					new sap.ui.core.Item({
						key: "2",
						text: "item 2"
					}),
				]
			});

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();

			oSelect.open();
			this.clock.tick(500);

			// act
			oSelect.rerender();
			sap.ui.getCore().applyChanges();

			// assertions
			ok(oSelect.hasStyleClass(sap.m.SelectRenderer.CSS_CLASS + "Pressed"));

			// cleanup
			oSelect.destroy();
		});

		/* ------------------------------ */
		/* _findFirstEnabledItem()        */
		/* ------------------------------ */

		test("_findFirstEnabledItem()", function() {

			// system under test
			var oExpectedItem;
			var aItems = [
				oExpectedItem = new sap.ui.core.Item({
					key: "0",
					text: "item 0"
				}),

				new sap.ui.core.Item({
					key: "1",
					text: "item 1"
				}),

				new sap.ui.core.Item({
					key: "2",
					text: "item 2",
					enabled: false
				})
			];

			var oSelect = new sap.m.Select({
				items: aItems
			});

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();

			// act
			var oFirstEnabledItem = oSelect._findFirstEnabledItem(aItems);

			// assertions
			ok(oFirstEnabledItem === oExpectedItem);

			// cleanup
			oSelect.destroy();
		});

		test("_findFirstEnabledItem()", function() {

			// system under test
			var aItems = [
				new sap.ui.core.Item({
					key: "0",
					text: "item 0",
					enabled: false
				}),

				new sap.ui.core.Item({
					key: "1",
					text: "item 1",
					enabled: false
				}),

				new sap.ui.core.Item({
					key: "2",
					text: "item 2",
					enabled: false
				})
			];

			var oSelect = new sap.m.Select({
				items: aItems
			});

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();

			// act
			var oFirstEnabledItem = oSelect._findFirstEnabledItem(aItems);

			// assertions
			ok(oFirstEnabledItem === null, 'The first enabled item is "null"');

			// cleanup
			oSelect.destroy();
		});

		test("_findFirstEnabledItem()", function() {

			// system under test
			var oSelect = new sap.m.Select();

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();

			// act
			var oFirstEnabledItem = oSelect._findFirstEnabledItem([]);

			// assertions
			ok(oFirstEnabledItem === null, 'The first enabled item is "null"');

			// cleanup
			oSelect.destroy();
		});

		/* ------------------------------ */
		/* _findLastEnabledItem()         */
		/* ------------------------------ */

		test("_findLastEnabledItem()", function() {

			// system under test
			var oExpectedItem;
			var aItems = [
				new sap.ui.core.Item({
					key: "0",
					text: "item 0",
					enabled: false
				}),

				new sap.ui.core.Item({
					key: "1",
					text: "item 1",
					enabled: false
				}),

				oExpectedItem = new sap.ui.core.Item({
					key: "2",
					text: "item 2"
				})
			];

			var oSelect = new sap.m.Select({
				items: aItems
			});

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();

			// act
			var oLastEnabledItem = oSelect._findLastEnabledItem(aItems);

			// assertions
			ok(oLastEnabledItem === oExpectedItem);

			// cleanup
			oSelect.destroy();
		});

		test("_findLastEnabledItem()", function() {

			// system under test
			var aItems = [
				new sap.ui.core.Item({
					key: "0",
					text: "item 0",
					enabled: false
				}),

				new sap.ui.core.Item({
					key: "1",
					text: "item 1",
					enabled: false
				}),

				new sap.ui.core.Item({
					key: "2",
					text: "item 2",
					enabled: false
				})
			];

			var oSelect = new sap.m.Select({
				items: aItems
			});

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();

			// act
			var oLastEnabledItem = oSelect._findLastEnabledItem(aItems);

			// assertions
			ok(oLastEnabledItem === null, 'The last enabled item is "null"');

			// cleanup
			oSelect.destroy();
		});

		test("_findLastEnabledItem()", function() {

			// system under test
			var oSelect = new sap.m.Select();

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();

			// act
			var oLastEnabledItem = oSelect._findLastEnabledItem([]);

			// assertions
			ok(oLastEnabledItem === null, 'The last enabled item is "null"');

			// cleanup
			oSelect.destroy();
		});

		/* ------------------------------------------ */
		/* _mapItemToListItem() and _findMappedItem() */
		/* ------------------------------------------ */

		test("_mapItemToListItem() and _findMappedItem()", function() {

			// system under test
			var oExpectedItem;
			var aItems = [
				oExpectedItem = new sap.ui.core.Item({
					key: "0",
					text: "item 0"
				}),

				new sap.ui.core.Item({
					key: "1",
					text: "item 1"
				}),

				new sap.ui.core.Item({
					key: "2",
					text: "item 2"
				})
			];

			var oSelect = new sap.m.Select({
				items: aItems
			});

			// act
			var oListItem = oSelect._mapItemToListItem(oExpectedItem);

			// assertions
			ok(oSelect._findMappedItem(oListItem, aItems) === oExpectedItem);
			ok(oSelect._findMappedItem({}, aItems) === null);

			// cleanup
			oSelect.destroy();
		});

		/* ------------------------------ */
		/* setSelectedIndex()             */
		/* ------------------------------ */

		var setSelectedIndexTestCase = function(sTestName, mOptions) {
			test("setSelectedIndex()", function() {

				// system under test
				var oSelect = mOptions.control;

				// act
				oSelect.setSelectedIndex(mOptions.input);

				// assertions
				ok(oSelect.getSelectedItem() === mOptions.output, sTestName);

				// cleanup
				oSelect.destroy();
			});
		};

		(function() {
			var oExpectedItem;
			var aItems = [
				new sap.ui.core.Item({
					key: "0",
					text: "item 0",
					enabled: false
				}),

				new sap.ui.core.Item({
					key: "1",
					text: "item 1"
				}),

				oExpectedItem = new sap.ui.core.Item({
					key: "3",
					text: "item 3"
				}),

				new sap.ui.core.Item({
					key: "2",
					text: "item 2"
				})
			];

			setSelectedIndexTestCase("", {
				control: new sap.m.Select({
					items: aItems
				}),
				input: 2,
				output: oExpectedItem
			});
		}());

		setSelectedIndexTestCase("", {
			control: new sap.m.Select(),
			input: 2,
			output: null
		});

		(function() {
			var oExpectedItem;
			var aItems = [
				new sap.ui.core.Item({
					key: "0",
					text: "item 0",
					enabled: false
				}),

				new sap.ui.core.Item({
					key: "1",
					text: "item 1"
				}),

				new sap.ui.core.Item({
					key: "3",
					text: "item 3"
				}),

				oExpectedItem = new sap.ui.core.Item({
					key: "2",
					text: "item 2"
				})
			];

			setSelectedIndexTestCase("The provided index is bigger than the last item's index", {
				control: new sap.m.Select({
					items: aItems
				}),
				input: 10,
				output: oExpectedItem
			});
		}());

		/* ------------------------------ */
		/* getItemAt()                    */
		/* ------------------------------ */

		test("getItemAt()", function() {

			// system under test
			var oExpectedItem;
			var aItems = [
				new sap.ui.core.Item({
					key: "0",
					text: "item 0",
					enabled: false
				}),

				new sap.ui.core.Item({
					key: "1",
					text: "item 1",
					enabled: false
				}),

				oExpectedItem = new sap.ui.core.Item({
					key: "2",
					text: "item 2"
				})
			];

			var oSelect = new sap.m.Select({
				items: aItems
			});

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();

			// act
			var oItem = oSelect.getItemAt(2),
				oItem1 = oSelect.getItemAt(6);

			// assertions
			ok(oItem === oExpectedItem);
			ok(oItem1 === null);

			// cleanup
			oSelect.destroy();
		});

		/* ------------------------------ */
		/* getFirstItem()                 */
		/* ------------------------------ */

		test("getFirstItem()", function() {

			// system under test
			var oExpectedItem;
			var aItems = [
				oExpectedItem = new sap.ui.core.Item({
					key: "0",
					text: "item 0"
				}),

				new sap.ui.core.Item({
					key: "1",
					text: "item 1"
				}),

				new sap.ui.core.Item({
					key: "2",
					text: "item 2"
				})
			];

			var oSelect = new sap.m.Select({
				items: aItems
			});

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();

			// act
			var oItem = oSelect.getFirstItem();

			// assertions
			ok(oItem === oExpectedItem);

			// cleanup
			oSelect.destroy();
		});

		test("getFirstItem()", function() {

			// system under test
			var oSelect = new sap.m.Select();

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();

			// act
			var oExpectedItem = oSelect.getFirstItem();

			// assertions
			ok(oExpectedItem === null, "There are no items");

			// cleanup
			oSelect.destroy();
		});

		/* ------------------------------ */
		/* getLastItem()                  */
		/* ------------------------------ */

		test("getLastItem()", function() {

			// system under test
			var oExpectedItem;
			var aItems = [
				new sap.ui.core.Item({
					key: "0",
					text: "item 0"
				}),

				new sap.ui.core.Item({
					key: "1",
					text: "item 1"
				}),

				oExpectedItem = new sap.ui.core.Item({
					key: "2",
					text: "item 2"
				})
			];

			var oSelect = new sap.m.Select({
				items: aItems
			});

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();

			// act
			var oItem = oSelect.getLastItem();

			// assertions
			ok(oItem === oExpectedItem);

			// cleanup
			oSelect.destroy();
		});

		test("getLastItem()", function() {

			// system under test
			var oSelect = new sap.m.Select();

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();

			// act
			var oItem = oSelect.getLastItem();

			// assertions
			ok(oItem === null, "There are no items");

			// cleanup
			oSelect.destroy();
		});

		/* ------------------------------ */
		/* getItemByKey()                 */
		/* ------------------------------ */

		test("getItemByKey()", function() {

			// system under test
			var oExpectedItem0;
			var oExpectedItem1;
			var oExpectedItem2;
			var aItems = [
				oExpectedItem0 = new sap.ui.core.Item({
					key: "0",
					text: "item 0"
				}),

				oExpectedItem1 = new sap.ui.core.Item({
					key: "1",
					text: "item 1"
				}),

				oExpectedItem2 = new sap.ui.core.Item({
					key: "2",
					text: "item 2"
				})
			];

			var oSelect = new sap.m.Select({
				items: aItems
			});

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();

			// act
			var oItem0 = oSelect.getItemByKey("0"),
				oItem1 = oSelect.getItemByKey("1"),
				oItem2 = oSelect.getItemByKey("2"),
				oItem3 = oSelect.getItemByKey("3");

			// assertions
			ok(oItem0 === oExpectedItem0);
			ok(oItem1 === oExpectedItem1);
			ok(oItem2 === oExpectedItem2);
			ok(oItem3 === null);

			// cleanup
			oSelect.destroy();
		});

		/* ------------------------------ */
		/* getEnabledItems()              */
		/* ------------------------------ */

		test("getEnabledItems()", function() {

			// system under test
			var oExpectedItem;
			var aItems = [
				oExpectedItem = new sap.ui.core.Item({
					key: "0",
					text: "item 0"
				}),

				new sap.ui.core.Item({
					key: "1",
					text: "item 1",
					enabled: false
				})
			];

			var oSelect = new sap.m.Select({
				items: aItems
			});

			// assertions + act
			ok(oSelect.getEnabledItems()[0] === oExpectedItem);

			// cleanup
			oSelect.destroy();
		});

		/* ------------------------------ */
		/* destroy()                      */
		/* ------------------------------ */

		test("destroy()", function() {

			// system under test
			var oSelect = new sap.m.Select({
				items: [
					new sap.ui.core.Item({
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					}),

					new sap.ui.core.Item({
						key: "2",
						text: "item 2"
					}),
				]
			});

			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();

			// act
			oSelect.destroy();
			sap.ui.getCore().applyChanges();

			// assertions
			strictEqual(oSelect.getItems().length, 0);
			ok(oSelect.getDomRef() === null);
			ok(oSelect.getPopup() === null);
			ok(oSelect.getList() === null);

			// cleanup
			oSelect.destroy();
		});

		test("calling destroy() when the Select's Popup is open", function() {

			// system under test
			var oSelect = new sap.m.Select({
				items: [
					new sap.ui.core.Item({
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					}),

					new sap.ui.core.Item({
						key: "2",
						text: "item 2"
					})
				]
			});

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();

			oSelect.open();
			this.clock.tick(1000);

			// act
			oSelect.destroy();
			sap.ui.getCore().applyChanges();

			// assertions
			strictEqual(oSelect.getItems().length, 0);
			ok(oSelect.getDomRef() === null);
			ok(oSelect.getPopup() === null);
			ok(oSelect.getList() === null);
			ok(oSelect.getPopup() === null);
		});

		/* =========================================================== */
		/* HTML module                                                 */
		/* =========================================================== */

		module("HTML");

		/* ------------------------------ */
		/* rendering                      */
		/* ------------------------------ */

		test("rendering", function() {

			// system under test
			var oSelect0 = new sap.m.Select({
				items: [
					new sap.ui.core.Item({
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1",
						enabled: false
					}),

					new sap.ui.core.Item({
						key: "2",
						text: "item 2"
					})
				]
			});

			var oSelect1 = new sap.m.Select({
				width: "50%",
				items: [
					new sap.ui.core.Item({
						key: "3",
						text: "item 3 item is not visible"
					})
				],
				visible: false
			});

			var oSelect2 =  new sap.m.Select({
				items: [
					new sap.ui.core.Item({
						key: "4",
						text: "item 4"
					}),

					new sap.ui.core.Item({
						key: "5",
						text: "item 5"
					}),

					new sap.ui.core.Item({
						key: "6",
						text: "item 6"
					}),

					new sap.ui.core.Item({
						key: "7",
						text: "item 7"
					}),

					new sap.ui.core.Item({
						key: "8",
						text: "item 8"
					})
				]
			});

			var oSelect3 = new sap.m.Select({
				items: [
					new sap.ui.core.Item({
						key: "9",
						text: "item 9"
					}),
				]
			});

			var oSelect4 = new sap.m.Select({
				items: [
					new sap.ui.core.Item({
						key: "10",
						text: "item 10"
					}),

					new sap.ui.core.Item({
						key: "11",
						text: "item 11"
					}),

					new sap.ui.core.Item({
						key: "12",
						text: "item 12"
					}),

					new sap.ui.core.Item({
						key: "13",
						text: "item 13"
					}),
				],

				selectedKey: "13"
			});

			var oSelect5 = new sap.m.Select({
				width: "13rem",
				items: [
					new sap.ui.core.Item({
						key: "14",
						text: "item 14"
					}),

					new sap.ui.core.Item({
						key: "15",
						text: "item 15"
					}),

					new sap.ui.core.Item({
						key: "16",
						text: "item 16"
					}),

					new sap.ui.core.Item({
						key: "17",
						text: "item 17"
					})
				]
			});

			var oSelect6 = new sap.m.Select({
				width: "200px",

				items: [
					new sap.ui.core.Item({
						key: "18",
						text: "item 18"
					}),

					new sap.ui.core.Item({
						key: "19",
						text: "item 19"
					}),

					new sap.ui.core.Item({
						key: "20",
						text: "item 20"
					}),

					new sap.ui.core.Item({
						key: "21",
						text: "item 21"
					})
				]
			});

			var oSelect7 = new sap.m.Select({

				items: [
					new sap.ui.core.Item({
						key: "22",
						text: "item 22"
					}),

					new sap.ui.core.Item({
						key: "23",
						text: "item 23"
					}),

					new sap.ui.core.Item({
						key: "24",
						text: "item 24"
					})
				]
			});

			var oSelect8 = new sap.m.Select({
				width: "4em",
				items: []
			});

			var oSelect9 = new sap.m.Select({
				items: [
					new sap.ui.core.Item({
						key: "25",
						text: "item 25"
					}),

					new sap.ui.core.Item({
						key: "26",
						text: "item 26"
					}),

					new sap.ui.core.Item({
						key: "27",
						text: "item 27"
					})
				],

				selectedItem: null
			});

			var oSelect10 = new sap.m.Select({
				items: [
					new sap.ui.core.Item({
						key: "28",
						text: "item 28"
					}),

					new sap.ui.core.Item({
						key: "29",
						text: "item 29"
					}),

					new sap.ui.core.Item({
						key: "30",
						text: "item 30"
					})
				]
			});

			var oSelect11 = new sap.m.Select({
				width: "2in",
				items: [
					new sap.ui.core.Item({
						key: "31",
						text: "item 31"
					}),

					new sap.ui.core.Item({
						key: "32",
						text: "item 32"
					}),

					new sap.ui.core.Item({
						key: "33",
						text: "item 33"
					})
				]
			});

			var oSelect12 = new sap.m.Select({
				width: "3cm",
				items: [
					new sap.ui.core.Item({
						key: "34",
						text: "item 34"
					}),

					new sap.ui.core.Item({
						key: "35",
						text: "item 35"
					}),

					new sap.ui.core.Item({
						key: "36",
						text: "item 36"
					})
				]
			});

			var oSelect13 = new sap.m.Select({
				width: "125pt",
				items: [
					new sap.ui.core.Item({
						key: "37",
						text: "item 37"
					}),

					new sap.ui.core.Item({
						key: "38",
						text: "item 38"
					}),

					new sap.ui.core.Item({
						key: "39",
						text: "item 39"
					})
				]
			});

			var oSelect14 = new sap.m.Select({
				items: [
					new sap.ui.core.Item({
						key: "40",
						text: "item 40"
					}),

					new sap.ui.core.Item({
						key: "41",
						text: "item 41"
					}),

					new sap.ui.core.Item({
						key: "42",
						text: "item 42"
					})
				]
			});

			var oSelect15 = new sap.m.Select({
				items: [
					new sap.ui.core.Item({
						key: "43",
						text: "item 43"
					}),

					new sap.ui.core.Item({
						key: "44",
						text: "item 44"
					}),

					new sap.ui.core.Item({
						key: "45",
						text: "item 45"
					})
				]
			});

			var oSelect16 = new sap.m.Select({
				items: [
					new sap.ui.core.Item({
						key: "46",
						text: "item 46"
					}),

					new sap.ui.core.Item({
						key: "47",
						text: "item 47"
					}),

					new sap.ui.core.Item({
						key: "48",
						text: "item 48"
					})
				]
			});

			var oSelect17 = new sap.m.Select({
				items: [
					new sap.ui.core.Item({
						key: "49",
						text: "item 49"
					}),

					new sap.ui.core.Item({
						key: "50",
						text: "item 50"
					}),

					new sap.ui.core.Item({
						key: "51",
						text: "item 51"
					})
				]
			});

			var oSelect8 = new sap.m.Select({
				type: sap.m.SelectType.IconOnly,
				icon: sap.ui.core.IconPool.getIconURI("add"),
				items: [
					new sap.ui.core.Item({
						key: "52",
						text: "item 52"
					}),

					new sap.ui.core.Item({
						key: "53",
						text: "item 53"
					}),

					new sap.ui.core.Item({
						key: "54",
						text: "item 54"
					}),
				]
			});

			var aSelects = [oSelect1, oSelect2, oSelect3, oSelect4, oSelect5, oSelect6, oSelect7, oSelect8];

			// arrange
			oSelect1.placeAt("select-content");
			oSelect2.placeAt("select-content");
			oSelect3.placeAt("select-content");
			oSelect4.placeAt("select-content");
			oSelect5.placeAt("select-content");
			oSelect6.placeAt("select-content");
			oSelect7.placeAt("select-content");
			oSelect8.placeAt("select-content");
			sap.ui.getCore().applyChanges();

			// assertions
			aSelects.forEach(function(oSelect) {
				var mDomRefs = fnGetDomRefs(oSelect.getId());

				if (!oSelect.getVisible()) {
					return;
				}

				if (oSelect.getType() === sap.m.SelectType.Default) {
					ok(mDomRefs.$Select.length, "The HTML div container html element exists");
					ok(mDomRefs.$Label.length, "The HTML label first-child element exists");
					ok(mDomRefs.$Arrow.length, "The HTML span element for the arrow exists");
				} else if (oSelect.getType() === sap.m.SelectType.IconOnly) {
					ok(mDomRefs.$Icon.length, "The HTML span element for the icon exists");
				}

				if (oSelect._isRequiredSelectElement() && oSelect.getItems().length) {
					ok(mDomRefs.$HtmlSelect.length, "The select html element exists");
				}

				if (oSelect.getType() === sap.m.SelectType.Default) {
					ok(mDomRefs.$Select.hasClass(sap.m.SelectRenderer.CSS_CLASS), 'The select container html element "must have" the CSS class "' + sap.m.SelectRenderer.CSS_CLASS + '"');
					ok(mDomRefs.$Label.hasClass(sap.m.SelectRenderer.CSS_CLASS + "Label"), 'The select first-child html label element "must have" the CSS class "' + sap.m.SelectRenderer.CSS_CLASS + 'Label"');
					ok(mDomRefs.$Arrow.hasClass(sap.m.SelectRenderer.CSS_CLASS + "Arrow"), 'The select html span element "must have" the CSS class "' + sap.m.SelectRenderer.CSS_CLASS + 'Arrow"');
				} else if (oSelect.getType() === sap.m.SelectType.IconOnly) {
					ok(mDomRefs.$Icon.hasClass(sap.m.SelectRenderer.CSS_CLASS + "Icon"), 'The select html span element "must have" the CSS class "' + sap.m.SelectRenderer.CSS_CLASS + 'Arrow"');
				}

				// cleanup
				oSelect.destroy();
			});
		});

		/* =========================================================== */
		/* Events module                                               */
		/* =========================================================== */

		module("Events");

		/* ------------------------------ */
		/* touchstart                     */
		/* ------------------------------ */

		test("touchstart", function() {

			// system under test
			var oSelect = new sap.m.Select({
				items: [
					new sap.ui.core.Item({
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					}),

					new sap.ui.core.Item({
						key: "2",
						text: "item 2"
					}),
				]
			});

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();

			// act
			sap.ui.test.qunit.triggerTouchEvent("touchstart", oSelect.getDomRef(), {
				touches: {
					0: {
						pageX: 10,
						length: 1
					},

					length: 1
				},

				targetTouches: {
					0: {
						pageX: 10,
						length: 1
					},

					length: 1
				}
			});

			// assertions
			ok(oSelect.$().hasClass(sap.m.SelectRenderer.CSS_CLASS + "Pressed"), 'The select must have the css class “' + sap.m.SelectRenderer.CSS_CLASS + 'Pressed”');

			// cleanup
			oSelect.destroy();
		});

		/* ------------------------------ */
		/* touchend                       */
		/* ------------------------------ */

		test("touchend", function() {

			// system under test
			var oSelect = new sap.m.Select({
				items: [
					new sap.ui.core.Item({
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					}),

					new sap.ui.core.Item({
						key: "2",
						text: "item 2"
					}),
				]
			});

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();

			// act
			sap.ui.test.qunit.triggerTouchEvent("touchstart", oSelect.getDomRef(), {
				touches: {
					0: {
						pageX: 10,
						length: 1
					},

					length: 1
				},

				targetTouches: {
					0: {
						pageX: 10,
						length: 1
					},

					length: 1
				}
			});

			sap.ui.test.qunit.triggerTouchEvent("touchend", oSelect.getDomRef(), {
				targetTouches: {
					0: {
						pageX: 10,
						length: 1
					},

					length: 1
				}
			});

			// assertions
			ok(!oSelect.$().hasClass(sap.m.SelectRenderer.CSS_CLASS + "Pressed"), 'The select must not have the CSS class “' + sap.m.SelectRenderer.CSS_CLASS + 'Pressed”');

			// cleanup
			oSelect.destroy();
		});

		/* ------------------------------ */
		/* tap                            */
		/* ------------------------------ */

		test("tap", function() {

			// system under test
			var oSelect = new sap.m.Select({
				items: [
					new sap.ui.core.Item({
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					}),

					new sap.ui.core.Item({
						key: "2",
						text: "item 2"
					}),
				]
			});

			// arrange
			var fnTapSpy = this.spy(oSelect, "ontap"),
				fnPopupCloseSpy,
				fnPopupIsOpenSpy;

			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();

			sap.ui.test.qunit.triggerTouchEvent("touchstart", oSelect.getDomRef(), {
				touches: {
					0: {
						pageX: 10,
						length: 1
					},

					length: 1
				},

				targetTouches: {
					0: {
						pageX: 10,
						length: 1
					},

					length: 1
				}
			});

			fnOpenSpy = this.spy(oSelect.getPopup(), "open");
			fnPopupCloseSpy = this.spy(oSelect.getPopup(), "close");
			fnPopupIsOpenSpy = this.spy(oSelect.getPopup(), "isOpen");

			sap.ui.test.qunit.triggerTouchEvent("touchend", oSelect.getDomRef(), {
				targetTouches: {
					0: {
						pageX: 10,
						length: 1
					},

					length: 1
				}
			});

			sap.ui.test.qunit.triggerTouchEvent("tap", oSelect.getDomRef(), {
				targetTouches: {
					0: {
						pageX: 10,
						length: 1
					},

					length: 1
				}
			});

			// assertions
			ok(fnTapSpy.calledOnce, "ontap() event handler must be called exactly once on " + oSelect);
			strictEqual(fnPopupCloseSpy.callCount, 0, "close() method of the popover must not be called");
			strictEqual(fnOpenSpy.callCount, 1, "open() method was called exactly once");
			ok(oSelect.$().hasClass(sap.m.SelectRenderer.CSS_CLASS + "Pressed"), 'The select must have the css class “' + sap.m.SelectRenderer.CSS_CLASS + 'Pressed”');

			// cleanup
			oSelect.destroy();
		});

		/* ------------------------------ */
		/* onkeypress                     */
		/* ------------------------------ */

		var fnKeypressTestCase = function(mOptions) {
			test("onkeypress", function() {

				// system under test
				var oSelect = mOptions.control;

				// arrange
				oSelect.placeAt("select-content");
				sap.ui.getCore().applyChanges();
				oSelect.focus();
				var fnKeypressSpy = this.spy(oSelect, "onkeypress");

				// act
				sap.ui.test.qunit.triggerKeypress(oSelect.getDomRef(), mOptions.character);

				// assertion
				ok(oSelect.getSelectedItem() === mOptions.output);

				// cleanup
				oSelect.destroy();
			});
		};

		(function() {
			var oExpectedItem;

			fnKeypressTestCase({
				control: new sap.m.Select({
					items: [
						oExpectedItem = new sap.ui.core.Item({
							key: "0",
							text: "a item 0"
						}),

						new sap.ui.core.Item({
							key: "1",
							text: "A item 1"
						})
					]
				}),

				character: "A",
				output: oExpectedItem
			});

			fnKeypressTestCase({
				control: new sap.m.Select({
					items: [
						oExpectedItem = new sap.ui.core.Item({
							key: "0",
							text: "A item 0"
						}),

						new sap.ui.core.Item({
							key: "1",
							text: "a item 1"
						})
					]
				}),

				character: "A",
				output: oExpectedItem
			});

			fnKeypressTestCase({
				control: new sap.m.Select({
					items: [
						new sap.ui.core.Item({
							key: "0",
							text: "0 item 0"
						}),

						oExpectedItem = new sap.ui.core.Item({
							key: "1",
							text: "1 item 1"
						})
					]
				}),

				character: "1",
				output: oExpectedItem
			});
		}());

		test("onkeypress if the selected item changes when a key is pressed, the change event has to be fired", function() {

			// system under test
			var oExpectedItem;
			var oSelect = new sap.m.Select({
				items: [
					new sap.ui.core.Item({
						key: "DZ",
						text: "Algeria"
					}),

					oExpectedItem = new sap.ui.core.Item({
						id: "item-id",
						key: "BE",
						text: "Belgium"
					})
				]
			});

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();
			oSelect.focus();
			var fnKeypressSpy = this.spy(oSelect, "onkeypress");
			var fnFireChangeSpy = this.spy(oSelect, "fireChange");

			// act
			sap.ui.test.qunit.triggerKeypress(oSelect.getDomRef(), "B");

			// assertion
			strictEqual(fnFireChangeSpy.callCount, 1, "The change event is fired");
			ok(oSelect.getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getSelectedItemId(), "item-id");
			strictEqual(oSelect.getSelectedKey(), "BE");
			ok(oSelect.getList().getSelectedItem() === oExpectedItem.data(sap.m.SelectRenderer.CSS_CLASS + "ListItem"));
			// strictEqual(oSelect.getValue(), "Belgium");	// not implemented
			strictEqual(fnGetDomRefs(oSelect.getId()).$Label.text(), "Belgium");

			// cleanup
			oSelect.destroy();
		});

		/* ------------------------------ */
		/* onsapshow                      */
		/* ------------------------------ */

		test("onsapshow F4 - the picker pop-up", function() {

			// system under test
			var oSelect = new sap.m.Select({
				items: [
					new sap.ui.core.Item({
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					})
				]
			});

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();
			oSelect.focus();
			var fnShowSpy = this.spy(oSelect, "onsapshow");
			var sOpenState = !jQuery.support.cssAnimations ? sap.ui.core.OpenState.OPEN : sap.ui.core.OpenState.OPENING;	// no animation on ie9

			// act
			sap.ui.test.qunit.triggerKeydown(oSelect.getDomRef(), jQuery.sap.KeyCodes.F4);

			// assertion
			strictEqual(fnShowSpy.callCount, 1, "onsapshow() method was called exactly once");
			strictEqual(oSelect.getPopup().oPopup.getOpenState(), sOpenState, "Control's picker pop-up is opening");
			ok(oSelect.isOpen(), "Control's picker pop-up is open");

			// cleanup
			oSelect.destroy();
		});

		test("onsapshow Alt + DOWN - open control's picker the pop-up", function() {

			// system under test
			var oSelect = new sap.m.Select({
				items: [
					new sap.ui.core.Item({
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					})
				]
			});

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();
			oSelect.focus();
			var fnShowSpy = this.spy(oSelect, "onsapshow");
			var sOpenState = !jQuery.support.cssAnimations ? sap.ui.core.OpenState.OPEN : sap.ui.core.OpenState.OPENING;	// no animation on ie9

			// act
			sap.ui.test.qunit.triggerKeydown(oSelect.getDomRef(), jQuery.sap.KeyCodes.ARROW_DOWN, false, true);

			// assertion
			strictEqual(fnShowSpy.callCount, 1, "onsapshow() method was called exactly once");
			strictEqual(oSelect.getPopup().oPopup.getOpenState(), sOpenState, "Control's picker pop-up is opening");
			ok(oSelect.isOpen(), "Control's picker pop-up is open");

			// cleanup
			oSelect.destroy();
		});

		test("onsapshow F4 - close control's picker pop-up", function() {

			// system under test
			var oSelect = new sap.m.Select({
				items: [
					new sap.ui.core.Item({
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					})
				]
			});

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();
			oSelect.focus();
			var fnShowSpy = this.spy(oSelect, "onsapshow");
			var sOpenState = !jQuery.support.cssAnimations ? sap.ui.core.OpenState.CLOSED : sap.ui.core.OpenState.CLOSING;	// no animation on ie9

			// act
			sap.ui.test.qunit.triggerKeydown(oSelect.getDomRef(), jQuery.sap.KeyCodes.F4);
			sap.ui.test.qunit.triggerKeydown(oSelect.getDomRef(), jQuery.sap.KeyCodes.F4);

			// assertion
			strictEqual(fnShowSpy.callCount, 2, "onsapshow() method was called twice");
			strictEqual(oSelect.getPopup().oPopup.getOpenState(), sOpenState, "Control's picker pop-up is closing");

			// cleanup
			oSelect.destroy();
		});

		test("onsapshow Alt + DOWN - close control's picker pop-up", function() {

			// system under test
			var oSelect = new sap.m.Select({
				items: [
					new sap.ui.core.Item({
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					})
				]
			});

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();
			oSelect.focus();
			var fnShowSpy = this.spy(oSelect, "onsapshow");
			var sOpenState = !jQuery.support.cssAnimations ? sap.ui.core.OpenState.CLOSED : sap.ui.core.OpenState.CLOSING;	// no animation on ie9

			// act
			sap.ui.test.qunit.triggerKeydown(oSelect.getDomRef(), jQuery.sap.KeyCodes.ARROW_DOWN, false, true);
			sap.ui.test.qunit.triggerKeydown(oSelect.getDomRef(), jQuery.sap.KeyCodes.ARROW_DOWN, false, true);

			// assertion
			strictEqual(fnShowSpy.callCount, 2, "onsapshow() method was called twice");
			strictEqual(oSelect.getPopup().oPopup.getOpenState(), sOpenState, "Control's picker pop-up is closing");

			// cleanup
			oSelect.destroy();
		});

		/* ------------------------------ */
		/* onsaphide                      */
		/* ------------------------------ */

		test("onsaphide Alt + UP - open control's picker pop-up", function() {

			// system under test
			var oSelect = new sap.m.Select({
				items: [
					new sap.ui.core.Item({
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					})
				]
			});

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();
			oSelect.focus();
			var fnHideSpy = this.spy(oSelect, "onsaphide");
			var sOpenState = !jQuery.support.cssAnimations ? sap.ui.core.OpenState.OPEN : sap.ui.core.OpenState.OPENING;	// no animation on ie9

			// act
			sap.ui.test.qunit.triggerKeydown(oSelect.getDomRef(), jQuery.sap.KeyCodes.ARROW_UP, false, true, false);

			// assertion
			strictEqual(fnHideSpy.callCount, 1, "onsaphide() method was called exactly once");
			strictEqual(oSelect.getPopup().oPopup.getOpenState(), sOpenState, "Control's picker pop-up is opening");
			ok(oSelect.isOpen(), "Control's picker pop-up is open");

			// cleanup
			oSelect.destroy();
		});

		test("onsaphide Alt + UP - close control's picker pop-up", function() {

			// system under test
			var oSelect = new sap.m.Select({
				items: [
					new sap.ui.core.Item({
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					})
				]
			});

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();
			oSelect.focus();
			var fnHideSpy = this.spy(oSelect, "onsaphide");
			var sOpenState = !jQuery.support.cssAnimations ? sap.ui.core.OpenState.CLOSED : sap.ui.core.OpenState.CLOSING;	// no animation on ie9

			// act
			sap.ui.test.qunit.triggerKeydown(oSelect.getDomRef(), jQuery.sap.KeyCodes.ARROW_UP, false, true, false);
			sap.ui.test.qunit.triggerKeydown(oSelect.getDomRef(), jQuery.sap.KeyCodes.ARROW_UP, false, true, false);

			// assertion
			strictEqual(fnHideSpy.callCount, 2, "onsaphide() method was called twice");
			strictEqual(oSelect.getPopup().oPopup.getOpenState(), sOpenState, "Control's picker pop-up is closing");

			// cleanup
			oSelect.destroy();
		});

		/* ------------------------------ */
		/* onsapescape                    */
		/* ------------------------------ */

		test("onsapescape - close the popup menu if it is open", function() {

			// system under test
			var oSelect = new sap.m.Select({
				items: [
					new sap.ui.core.Item({
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					})
				]
			});

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();
			oSelect.focus();
			var fnEscapeSpy = this.spy(oSelect, "onsapescape");
			var fnCloseSpy = this.spy(oSelect, "close");

			// act
			sap.ui.test.qunit.triggerKeydown(oSelect.getDomRef(), jQuery.sap.KeyCodes.ESCAPE);

			// assertion
			strictEqual(fnEscapeSpy.callCount, 1, "onsapescape() method was called exactly once");
			strictEqual(fnCloseSpy.callCount, 0, "close() method is not called");

			// cleanup
			oSelect.destroy();
		});

		test("onsapescape - close the control's picker pop-up if it is open", function() {

			// system under test
			var oSelect = new sap.m.Select({
				items: [
					new sap.ui.core.Item({
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					})
				]
			});

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();
			oSelect.focus();
			oSelect.open();
			this.clock.tick(1000);

			var fnEscapeSpy = this.spy(oSelect, "onsapescape");
			var fnCloseSpy = this.spy(oSelect, "close");

			// act
			sap.ui.test.qunit.triggerKeydown(oSelect.getDomRef(), jQuery.sap.KeyCodes.ESCAPE);

			// assertion
			strictEqual(fnEscapeSpy.callCount, 1, "onsapescape() method was called exactly once");
			strictEqual(fnCloseSpy.callCount, 1, "close() method was called exactly once");

			// cleanup
			oSelect.destroy();
		});

		/* ------------------------------ */
		/* onsapenter                     */
		/* ------------------------------ */

		test("onsapenter - close list box", function() {

			// system under test
			var oSelect = new sap.m.Select({
				items: [
					new sap.ui.core.Item({
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					})
				]
			});

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();
			oSelect.focus();
			var fnEnterSpy = this.spy(oSelect, "onsapenter");
			var fnCloseSpy = this.spy(oSelect, "close");

			// act
			sap.ui.test.qunit.triggerKeydown(oSelect.getDomRef(), jQuery.sap.KeyCodes.ENTER);

			// assertion
			strictEqual(fnEnterSpy.callCount, 1, "onsapenter() method was called exactly once");
			strictEqual(fnCloseSpy.callCount, 1, "close() method was called exactly once");

			// cleanup
			oSelect.destroy();
		});

		/* ------------------------------ */
		/* onsapdown                      */
		/* ------------------------------ */

		test("onsapdown", function() {

			// system under test
			var oExpectedItem;
			var oSelect = new sap.m.Select({
				items: [
					new sap.ui.core.Item({
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1",
						enabled: false
					}),

					oExpectedItem = new sap.ui.core.Item({
						id: "item-id",
						key: "2",
						text: "item 2"
					})
				]
			});

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();
			oSelect.focus();
			var fnKeyDownSpy = this.spy(oSelect, "onsapdown");
			var fnFireChangeSpy = this.spy(oSelect, "fireChange");

			// act
			sap.ui.test.qunit.triggerKeydown(oSelect.getDomRef(), jQuery.sap.KeyCodes.ARROW_DOWN);

			// assertion
			strictEqual(fnKeyDownSpy.callCount, 1, "onsapdown() method was called exactly once");
			strictEqual(fnFireChangeSpy.callCount, 1, "The change event is fired");
			ok(oSelect.getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getSelectedItemId(), "item-id");
			strictEqual(oSelect.getSelectedKey(), "2");
			ok(oSelect.getList().getSelectedItem() === oExpectedItem.data(sap.m.SelectRenderer.CSS_CLASS + "ListItem"));
			// strictEqual(oSelect.getValue(), "item 2");	// not implemented
			strictEqual(fnGetDomRefs(oSelect.getId()).$Label.text(), "item 2");

			// cleanup
			oSelect.destroy();
		});

		test("onsapdown", function() {

			// system under test
			var oSelect = new sap.m.Select({
				items: [
					new sap.ui.core.Item({
						key: "0",
						text: "item 0",
						enabled: false
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1",
						enabled: false
					}),

					new sap.ui.core.Item({
						key: "2",
						text: "item 2",
						enabled: false
					})
				]
			});

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();
			oSelect.focus();
			var fnKeyDownSpy = this.stub(oSelect, "onsapdown");
			var fnFireChangeSpy = this.spy(oSelect, "fireChange");

			// act
			sap.ui.test.qunit.triggerKeydown(oSelect.getDomRef(), jQuery.sap.KeyCodes.ARROW_DOWN);

			// assertion
			strictEqual(fnKeyDownSpy.callCount, 1, "onsapdown() method was called exactly once");
			strictEqual(fnFireChangeSpy.callCount, 0, "The change event not fired");
			ok(oSelect.getSelectedItem() === null);
			strictEqual(oSelect.getSelectedItemId(), "");
			strictEqual(oSelect.getSelectedKey(), "");
			ok(oSelect.getList().getSelectedItem() === null);
			// strictEqual(oSelect.getValue(), "");	// not implemented
			strictEqual(fnGetDomRefs(oSelect.getId()).$Label.text(), "");

			// cleanup
			oSelect.destroy();
		});

		test("onsapdown", function() {

			// system under test
			var oExpectedItem;
			var oSelect = new sap.m.Select({
				items: [
					oExpectedItem = new sap.ui.core.Item({
						id: "item-id",
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1",
						enabled: false
					}),

					new sap.ui.core.Item({
						key: "2",
						text: "item 2",
						enabled: false
					})
				]
			});

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();
			oSelect.focus();
			var fnKeyDownSpy = this.spy(oSelect, "onsapdown");
			var fnFireChangeSpy = this.spy(oSelect, "fireChange");

			// act
			sap.ui.test.qunit.triggerKeydown(oSelect.getDomRef(), jQuery.sap.KeyCodes.ARROW_DOWN);

			// assertion
			strictEqual(fnKeyDownSpy.callCount, 1, "onsapdown() method was called exactly once");
			strictEqual(fnFireChangeSpy.callCount, 0, "The change event is not fired");
			ok(oSelect.getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getSelectedItemId(), "item-id");
			strictEqual(oSelect.getSelectedKey(), "0");
			ok(oSelect.getList().getSelectedItem() === oExpectedItem.data(sap.m.SelectRenderer.CSS_CLASS + "ListItem"));
			// strictEqual(oSelect.getValue(), "item 0");	// not implemented
			strictEqual(fnGetDomRefs(oSelect.getId()).$Label.text(), "item 0");

			// cleanup
			oSelect.destroy();
		});

		/* ------------------------------ */
		/* onsapup                        */
		/* ------------------------------ */

		test("onsapup", function() {

			// system under test
			var oItem;
			var oExpectedItem;
			var oSelect = new sap.m.Select({
				items: [
					oExpectedItem = new sap.ui.core.Item({
						id: "item-id",
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1",
						enabled: false
					}),

					oItem = new sap.ui.core.Item({
						key: "2",
						text: "item 2"
					})
				],

				selectedItem: oItem
			});

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();
			oSelect.focus();
			var fnKeyUpSpy = this.spy(oSelect, "onsapup");
			var fnFireChangeSpy = this.spy(oSelect, "fireChange");

			// act
			sap.ui.test.qunit.triggerKeydown(oSelect.getDomRef(), jQuery.sap.KeyCodes.ARROW_UP);

			// assertion
			strictEqual(fnKeyUpSpy.callCount, 1, "onsapup() method was called exactly once");
			strictEqual(fnFireChangeSpy.callCount, 1, "The change event is fired");
			ok(oSelect.getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getSelectedItemId(), "item-id");
			strictEqual(oSelect.getSelectedKey(), "0");
			ok(oSelect.getList().getSelectedItem() === oExpectedItem.data(sap.m.SelectRenderer.CSS_CLASS + "ListItem"));
			// strictEqual(oSelect.getValue(), "item 0");	// not implemented
			strictEqual(fnGetDomRefs(oSelect.getId()).$Label.text(), "item 0");

			// cleanup
			oSelect.destroy();
		});

		test("onsapup", function() {

			// system under test
			var oSelect = new sap.m.Select({
				items: [
					new sap.ui.core.Item({
						key: "0",
						text: "item 0",
						enabled: false
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1",
						enabled: false
					}),

					new sap.ui.core.Item({
						key: "2",
						text: "item 2",
						enabled: false
					})
				]
			});

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();
			oSelect.focus();
			var fnKeyUpSpy = this.spy(oSelect, "onsapup");
			var fnFireChangeSpy = this.spy(oSelect, "fireChange");

			// act
			sap.ui.test.qunit.triggerKeydown(oSelect.getDomRef(), jQuery.sap.KeyCodes.ARROW_UP);

			// assertion
			strictEqual(fnKeyUpSpy.callCount, 1, "onsapup() method was called exactly once");
			strictEqual(fnFireChangeSpy.callCount, 0, "The change event is not fired");
			ok(oSelect.getSelectedItem() === null);
			strictEqual(oSelect.getSelectedItemId(), "");
			strictEqual(oSelect.getSelectedKey(), "");
			ok(oSelect.getList().getSelectedItem() === null);
			// strictEqual(oSelect.getValue(), "");	// not implemented
			strictEqual(fnGetDomRefs(oSelect.getId()).$Label.text(), "");

			// cleanup
			oSelect.destroy();
		});

		test("onsapup", function() {

			// system under test
			var oExpectedItem;
			var oSelect = new sap.m.Select({
				items: [
					new sap.ui.core.Item({
						key: "0",
						text: "item 0",
						enabled: false
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1",
						enabled: false
					}),

					oExpectedItem = new sap.ui.core.Item({
						id: "item-id",
						key: "2",
						text: "item 2"
					})
				],

				selectedItem: oExpectedItem
			});

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();
			oSelect.focus();
			var fnKeyUpSpy = this.stub(oSelect, "onsapup");
			var fnFireChangeSpy = this.spy(oSelect, "fireChange");

			// act
			sap.ui.test.qunit.triggerKeydown(oSelect.getDomRef(), jQuery.sap.KeyCodes.ARROW_UP);

			// assertion
			strictEqual(fnKeyUpSpy.callCount, 1, "onsapup() method was called exactly once");
			strictEqual(fnFireChangeSpy.callCount, 0, "The change event is not fired");
			ok(oSelect.getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getSelectedItemId(), "item-id");
			strictEqual(oSelect.getSelectedKey(), "2");
			ok(oSelect.getList().getSelectedItem() === oExpectedItem.data(sap.m.SelectRenderer.CSS_CLASS + "ListItem"));
			// strictEqual(oSelect.getValue(), "item 2");	// not implemented
			strictEqual(fnGetDomRefs(oSelect.getId()).$Label.text(), "item 2");

			// cleanup
			oSelect.destroy();
		});

		/* ------------------------------ */
		/* onsaphome                      */
		/* ------------------------------ */

		test("onsaphome", function() {

			// system under test
			var oExpectedItem;
			var oItem;
			var oSelect = new sap.m.Select({
				items: [
					oExpectedItem = new sap.ui.core.Item({
						id: "item-id",
						key: "0",
						text: "item 0"
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					}),

					new sap.ui.core.Item({
						key: "2",
						text: "item 2",
						enabled: false
					}),

					oItem = new sap.ui.core.Item({
						key: "3",
						text: "item 3"
					}),

					new sap.ui.core.Item({
						key: "4",
						text: "item 4",
						enabled: false
					})
				],

				selectedItem: oItem
			});

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();
			oSelect.focus();
			var fnKeyHomeSpy = this.spy(oSelect, "onsaphome");
			var fnFireChangeSpy = this.spy(oSelect, "fireChange");

			// act
			sap.ui.test.qunit.triggerKeydown(oSelect.getDomRef(), jQuery.sap.KeyCodes.HOME);

			// assertion
			strictEqual(fnKeyHomeSpy.callCount, 1, "onsaphome() method was called exactly once");
			strictEqual(fnFireChangeSpy.callCount, 1, "The change event is fired");
			ok(oSelect.getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getSelectedItemId(), "item-id");
			strictEqual(oSelect.getSelectedKey(), "0");
			ok(oSelect.getList().getSelectedItem() === oExpectedItem.data(sap.m.SelectRenderer.CSS_CLASS + "ListItem"));
			// strictEqual(oSelect.getValue(), "item 0");	// not implemented
			strictEqual(fnGetDomRefs(oSelect.getId()).$Label.text(), "item 0");

			// cleanup
			oSelect.destroy();
		});

		test("onsaphome", function() {

			// system under test
			var oExpectedItem;
			var oItem;
			var oSelect = new sap.m.Select({
				items: [
					new sap.ui.core.Item({
						key: "0",
						text: "item 0",
						enabled: false
					}),

					oExpectedItem = new sap.ui.core.Item({
						id: "item-id",
						key: "1",
						text: "item 1"
					}),

					new sap.ui.core.Item({
						key: "2",
						text: "item 2"
					}),

					new sap.ui.core.Item({
						key: "3",
						text: "item 3"
					}),

					oItem = new sap.ui.core.Item({
						key: "4",
						text: "item 4"
					})
				],

				selectedItem: oItem
			});

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();
			oSelect.focus();
			var fnKeyHomeSpy = this.spy(oSelect, "onsaphome");
			var fnFireChangeSpy = this.spy(oSelect, "fireChange");

			// act
			sap.ui.test.qunit.triggerKeydown(oSelect.getDomRef(), jQuery.sap.KeyCodes.HOME);

			// assertion
			strictEqual(fnKeyHomeSpy.callCount, 1, "onsaphome() method was called exactly once");
			strictEqual(fnFireChangeSpy.callCount, 1, "The change event is fired");
			ok(oSelect.getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getSelectedItemId(), "item-id");
			strictEqual(oSelect.getSelectedKey(), "1");
			ok(oSelect.getList().getSelectedItem() === oExpectedItem.data(sap.m.SelectRenderer.CSS_CLASS + "ListItem"));
			// strictEqual(oSelect.getValue(), "item 1");	// not implemented
			strictEqual(fnGetDomRefs(oSelect.getId()).$Label.text(), "item 1");

			// cleanup
			oSelect.destroy();
		});

		/* ------------------------------ */
		/* onsapend                       */
		/* ------------------------------ */

		test("onsapend", function() {

			// system under test
			var oExpectedItem;
			var oSelect = new sap.m.Select({
				items: [
					new sap.ui.core.Item({
						key: "0",
						text: "item 0",
						enabled: false
					}),

					new sap.ui.core.Item({
						key: "1",
						text: "item 1"
					}),

					new sap.ui.core.Item({
						key: "2",
						text: "item 2"
					}),

					new sap.ui.core.Item({
						key: "3",
						text: "item 3"
					}),

					oExpectedItem = new sap.ui.core.Item({
						id: "item-id",
						key: "4",
						text: "item 4"
					})
				]
			});

			// arrange
			oSelect.placeAt("select-content");
			sap.ui.getCore().applyChanges();
			oSelect.focus();
			var fnKeyEndSpy = this.spy(oSelect, "onsapend");
			var fnFireChangeSpy = this.spy(oSelect, "fireChange");

			// act
			sap.ui.test.qunit.triggerKeydown(oSelect.getDomRef(), jQuery.sap.KeyCodes.END);

			// assertion
			strictEqual(fnKeyEndSpy.callCount, 1, "onsapend() method was called exactly once");
			strictEqual(fnFireChangeSpy.callCount, 1, "The change event is fired");
			ok(oSelect.getSelectedItem() === oExpectedItem);
			strictEqual(oSelect.getSelectedItemId(), "item-id");
			strictEqual(oSelect.getSelectedKey(), "4");
			ok(oSelect.getList().getSelectedItem() === oExpectedItem.data(sap.m.SelectRenderer.CSS_CLASS + "ListItem"));
			// strictEqual(oSelect.getValue(), "item 4");	// not implemented
			strictEqual(fnGetDomRefs(oSelect.getId()).$Label.text(), "item 4");

			// cleanup
			oSelect.destroy();
		});

		</script>
	</head>
	<body id="body" class="sapUiBody">
		<h1 id="qunit-header">QUnit tests: sap.m.Select</h1>
		<h2 id="qunit-banner"></h2>
		<h2 id="qunit-userAgent"></h2>
		<div id="qunit-testrunner-toolbar"></div>
		<ol id="qunit-tests"></ol>
		<div id="select-content" class="select-content"></div>
	</body>
</html>